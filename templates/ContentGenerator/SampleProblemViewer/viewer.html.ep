<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>PG Sample Problems</title>
	<%= stylesheet $c->url({ type => 'webwork', name => 'theme',  file => 'bootstrap.css' }) =%>
	<style>
		.navbar {
			height: 70px;
		}
		body {
			margin-top: 70px;
		}
		#sidebar {
			--bs-offcanvas-width: 320px;
		}
		@media only screen and (min-width: 768px) {
			#sidebar {
				width: 320px;
				height: calc(100vh - 70px);
			}
		}
	</style>
	<%= javascript $c->url({
			type => 'webwork', name => 'htdocs',
			file => 'node_modules/bootstrap/dist/js/bootstrap.bundle.min.js'
		}), defer => undef =%>
</head>
%
<body>
	<nav class="navbar fixed-top bg-primary border-bottom border-dark" data-bs-theme="dark">
		<div class="container-fluid">
			<ul class="nav nav-pills">
				<li class="nav-item dropdown">
					<a class="nav-link fs-3 dropdown-toggle active" href="#" role="button"
						data-bs-toggle="dropdown" aria-expanded="false">
						<%= $type eq 'categories' ? 'Sample Problems'
							: $type eq 'techniques' ? 'Problem Techniques'
							: $type eq 'subjects' ? 'Subject Area Problems'
							: 'Problems by Macro' =%>
					</a>
					<ul class="dropdown-menu">
						<li>
							<a class="dropdown-item <%= $type eq 'categories' ? 'active' : '' %>"
								href="categories.html" <%= $type eq 'categories' ? 'aria-current="page"' : '' %>>
								Sample Problems by Category
							</a>
						</li>
						<li>
							<a class="dropdown-item <%= $type eq 'techniques' ? 'active' : '' %>"
								href="techniques.html" <%= $type eq 'techniques' ? 'aria-current="page"' : '' %>>
								Problem Techniques
							</a>
						</li>
						<li>
							<a class="dropdown-item <%= $type eq 'subjects' ? 'active' : '' %>"
								href="subjects.html" <%= $type eq 'subjects' ? 'aria-current="page"' : '' %>>
								Subject Area Problems
							</a>
						</li>
						<li>
							<a class="dropdown-item <%= $type eq 'macros' ? 'active' : '' %>"
								href="macros.html" <%= $type eq 'macros' ? 'aria-current="page"' : '' %>>
								Problems by Macro
							</a>
						</li>
					</ul>
				</li>
			</ul>
			<button class="navbar-toggler d-md-none" type="button" data-bs-toggle="offcanvas"
				data-bs-target="#sidebar" aria-controls="sidebar" aria-label="Toggle Sidebar">
				<span class="navbar-toggler-icon"></span>
			</button>
		</div>
	</nav>
	%
	<div class="d-flex">
		<div class="offcanvas-md offcanvas-start overflow-y-auto border-end border-dark flex-shrink-0" tabindex="-1"
			id="sidebar" aria-labelledby="sidebar-label">
			<div class="offcanvas-header">
				<h2 class="offcanvas-title fs-3" id="sidebar-label"><%= $label =%></h2>
				<button type="button" class="btn-close" data-bs-dismiss="offcanvas"
					data-bs-target="#sidebar" aria-label="Close">
				</button>
			</div>
			%
			<!-- Sidebar -->
			<h2 class="fs-3 d-none d-md-block px-3 pt-3"><%= $label =%></h2>
			<div class="offcanvas-body px-md-3 pb-md-3 w-100">
				<div class="list-group w-100" role="tablist" id="sidebar-list">
					% if ($label eq 'Problem Techniques') {
						% for (['A' .. 'C'], ['D' .. 'F'], ['G' .. 'N'], ['O' .. 'Z']) {
						<a class="list-group-item list-group-item-action" id="<%= $_->[0] %>-tab" href="#<%= $_->[0] %>"
							data-bs-toggle="list" role="tab" aria-controls="<%= $_->[0] %>">
							<%= $_->[0] %> .. <%= $_->[-1] %>
						</a>
						% }
					% } else {
						% for (sort(keys %$list)) {
							% my $id = $_ =~ s/\s/_/gr;
							<a class="list-group-item list-group-item-action" id="<%= $id %>-tab" href="#<%= $id %>"
								data-bs-toggle="list" role="tab" aria-controls="<%= $id %>">
								<%= $_ %>
							</a>
						% }
					% }
				</div>
			</div>
		</div>
		%
		<div class="main-content">
			<div class="tab-content p-3">
				% if ($label eq 'Problem Techniques') {
					% for (['A' .. 'C'], ['D' .. 'F'], ['G' .. 'N'], ['O' .. 'Z']) {
						<div class="tab-pane fade" id="<%= $_->[0] %>" role="tabpanel"
							aria-labelledby="<%= $_->[0] %>-tab" tabindex="0">
							<h1 class="fs-3">Sample Problems for Techniques: <%= $_->[0] %> .. <%= $_->[-1] %></h1>
							<ul>
								% my $b = join('', @$_);
								% for (sort grep { substr($_, 0, 1 ) =~ qr/^[$b]/i } keys(%$list)) {
									<li><a href="<%= $list->{$_} =%>"><%= $_ =%></a></li>
								% }
							</ul>
						</div>
					% }
				% } else {
					% for (sort(keys %$list)) {
						% my $id = $_ =~ s/\s/_/gr;
						<div class="tab-pane fade" id="<%= $id %>" role="tabpanel" aria-labelledby="<%= $id %>-tab"
							tabindex="0">
							<h1 class="fs-3">Sample Problems for <%=$label=%>: <%= $_ %></h1>
							<ul>
								% for my $link (sort (keys %{$list->{$_}})) {
									<li><a href="<%= $list->{$_}{$link} =%>"><%= $link %></a></li>
								% }
							</ul>
						</div>
					% }
				% }
			</div>
		</div>
	</div>
	<%= javascript $c->url({ type => 'webwork', name => 'htdocs',
		file => 'js/SampleProblemViewer/layout-index.js' }),	defer => undef =%>
</body>

</html>
