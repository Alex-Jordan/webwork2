"use strict";function graphTool(t,o){function e(t){this.baseObj=t,this.baseObj.gtGraphObject=this,this.definingPts={}}function i(t,o,i){e.call(this,X.board.create("point",[t,o],{size:2,snapToGrid:!0,snapSizeX:X.snapSizeX,snapSizeY:X.snapSizeY,withLabel:!1,strokeColor:i||X.underConstructionColor,fixed:X.isStatic,highlightStrokeColor:X.underConstructionColor,highlightFillColor:X.pointHighlightColor})),X.isStatic||(this.on("down",function(){X.board.containerObj.style.cursor="none"}),this.on("up",function(){X.board.containerObj.style.cursor="auto"}),this.on("drag",X.updateText))}function r(t,o,i,r){e.call(this,X.board.create("line",[t,o],{fixed:!0,highlight:!1,strokeColor:r||X.underConstructionColor,dash:i?0:2})),this.definingPts.point1=t,this.definingPts.point2=o}function n(t,o,i,r){e.call(this,X.board.create("circle",[t,o],{fixed:!0,highlight:!1,strokeColor:r||X.underConstructionColor,dash:i?0:2})),this.definingPts.center=t,this.definingPts.point=o}function s(t,o,e){return e?(o.Y()-t.Y())/Math.pow(o.X()-t.X(),2):(o.X()-t.X())/Math.pow(o.Y()-t.Y(),2)}function a(t,o,e,i,r){return e?X.board.create("curve",[function(t){return t},function(i){return s(t,o,e)*Math.pow(i-t.X(),2)+t.Y()},function(){return X.board.getBoundingBox()[0]},function(){return X.board.getBoundingBox()[2]}],{strokeWidth:2,highlight:!1,strokeColor:r||X.underConstructionColor,dash:i?0:2}):X.board.create("curve",[function(i){return s(t,o,e)*Math.pow(i-t.Y(),2)+t.X()},function(t){return t},function(){return X.board.getBoundingBox()[3]},function(){return X.board.getBoundingBox()[1]}],{strokeWidth:2,highlight:!1,strokeColor:r||X.underConstructionColor,dash:i?0:2})}function d(t,o,i,r,n){e.call(this,a(t,o,i,r,n)),this.definingPts.vertex=t,this.definingPts.point=o,this.vertical=i}function l(t){t.setAttribute({visible:!1}),e.call(this,t),this.focused=!0,this.definingPts.point=t,this.updateTimeout=0,this.update();var o=this;this.definingPts.icon=X.board.create("image",[function(){return o.focused?X.fillIconFocused:X.fillIcon},[t.X()-12/X.board.unitX,t.Y()-12/X.board.unitY],[function(){return 24/X.board.unitX},function(){return 24/X.board.unitY}]],{withLabel:!1,highlight:!1,layer:9,name:"FillIcon"}),this.definingPts.icon.gtGraphObject=this,this.definingPts.icon.point=t,this.isStatic=X.isStatic,X.isStatic||(this.on("down",function(){X.board.containerObj.style.cursor="none"}),this.on("up",function(){X.board.containerObj.style.cursor="auto"}),this.on("drag",function(t){var e=X.getMouseCoords(t),i=X.snapRound(e.usrCoords[1],X.snapSizeX),r=X.snapRound(e.usrCoords[2],X.snapSizeY);this.setPosition(JXG.COORDS_BY_USER,[i-12/X.board.unitX,r-12/X.board.unitY]),this.point.setPosition(JXG.COORDS_BY_USER,[i,r]),o.update(),X.updateText()}))}function p(t,o,e){this.button=$("<button type=button class='btn gt-button gt-tool-button gt-"+o+"-tool' data-toggle='tooltip' title='"+e+"'>&nbsp;</button>");var i=this;this.button.on("click",function(){i.activate()}),t.append(this.button),this.hlObjs={}}function c(t){p.call(this,t,"select","Object Selection Tool")}function u(t,o,e){p.call(this,t,o||"point",e||"Point Tool")}function h(t,o,e){p.call(this,t,o||"line",e||"Line Tool")}function b(t,o,e){p.call(this,t,o||"circle",e||"Circle Tool")}function f(t,o,e,i){p.call(this,t,e||(o?"vertical-parabola":"horizontal-parabola"),i||(o?"Vertical Parabola Tool":"Horizontal Parabola Tool")),this.vertical=o}function g(t,o,e){f.call(this,t,!0,o,e)}function y(t,o,e){f.call(this,t,!1,o,e)}function O(t,o,e){p.call(this,t,o||"fill",e||"Region Shading Tool")}function C(t){this.blur(),"solidButton"in X&&X.solidButton.prop("disabled",t.data.solid),"dashedButton"in X&&X.dashedButton.prop("disabled",!t.data.solid),X.selectedObj&&(X.selectedObj.setSolid(t.data.solid),X.updateText()),X.drawSolid=t.data.solid,X.activeTool.updateHighlights()}function v(){if(this.blur(),X.selectedObj){var t=$('<div class="modal" tabindex="-1" role="dialog" aria-labelledby="deleteObjectDialog" aria-hidden="true"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button><h3 id="deleteObjectDialog">Delete Selected Object</h3></div><div class="modal-body"><div>Do you want to delete the selected object?</div></div><div class="modal-footer"><button class="btn btn-primary" id="gt-confirm-delete">Yes</button><button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">No</button></div></div>');t.modal("show"),$(".modal-backdrop").css("opacity","0.2"),t.on("hidden",function(){t.remove()}),$("#gt-confirm-delete").on("click",function(){for(var o=0;o<X.graphedObjs.length;++o)if(X.graphedObjs[o].id()===X.selectedObj.id()){X.graphedObjs[o].remove(),X.graphedObjs.splice(o,1);break}X.selectedObj=null,X.updateObjects(),X.updateText(),t.modal("hide")})}}function j(){if(this.blur(),0!=X.graphedObjs.length){var t=$('<div class="modal" tabindex="-1" role="dialog" aria-labelledby="clearGraphDialog" aria-hidden="true"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button><h3 id="clearGraphDialog">Delete Selected Object</h3></div><div class="modal-body"><div>Do you want to remove all graphed objects?</div></div><div class="modal-footer"><button class="btn btn-primary" id="gt-confirm-clear">Yes</button><button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">No</button></div></div>');t.modal("show"),$(".modal-backdrop").css("opacity","0.2"),t.on("hidden",function(){t.remove()}),$("#gt-confirm-clear").on("click",function(){X.graphedObjs.forEach(function(t){t.remove()}),X.graphedObjs=[],X.selectedObj=null,X.selectTool.activate(),X.html_input.value="",t.modal("hide")})}}function m(t){var o=$("<div class='gt-solid-dash-box'></div>");X.solidButton=$("<button type=button class='btn gt-button gt-tool-button gt-solid-tool' data-toggle='tooltip' title='Make Selected Object Solid' disabled>&nbsp;</button>").on("click",{solid:!0},C),o.append(X.solidButton),X.dashedButton=$("<button type=button class='btn gt-button gt-tool-button gt-dashed-tool' data-toggle='tooltip' title='Make Selected Object Dashed'>&nbsp;</button>").on("click",{solid:!1},C),o.append(X.dashedButton),t.append(o)}function S(t,o){X.board.suspendUpdate();var i=X.isStatic;X.isStatic=o;for(var r,n=/{(.*?)}/g;r=n.exec(t);){var s=e.restore(r[1]);!1!==s&&(o?X.staticObjs.push(s):X.graphedObjs.push(s))}X.isStatic=i,X.updateObjects(),X.board.unsuspendUpdate()}if(!document.getElementById(t+"_graph")){var x=$("#"+t);if("0px"==x.css("width"))return void setTimeout(function(){graphTool(t,o)},100);var X={};X.curveColor="#0000a6",X.focusCurveColor="#0000f5",X.fillColor="#a384e5",X.pointColor="orange",X.pointHighlightColor="yellow",X.underConstructionColor="orange",X.snapSizeX=o.snapSizeX?o.snapSizeX:1,X.snapSizeY=o.snapSizeY?o.snapSizeY:1,X.isStatic="isStatic"in o&&o.isStatic;var z=o.availableTools?o.availableTools:["LineTool","CircleTool","VerticalParabolaTool","HorizontalParabolaTool","FillTool","SolidDashTool"];X.fillIcon="data:image/svg+xml,%3Csvg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns%23' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' id='SVGRoot' version='1.1' viewBox='0 0 32 32' height='32px' width='32px'%3E%3Cdefs id='defs815' /%3E%3Cmetadata id='metadata818'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:format%3Eimage/svg+xml%3C/dc:format%3E%3Cdc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage' /%3E%3Cdc:title%3E%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cg id='layer1'%3E%3Cpath id='path1382' d='m 13.466084,10.267728 -4.9000003,8.4 4.9000003,4.9 8.4,-4.9 z' style='opacity:1;fill:"+X.fillColor.replace(/#/,"%23")+";fill-opacity:1;stroke:%23000000;stroke-width:1.3;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none' /%3E%3Cpath id='path1384' d='M 16.266084,15.780798 V 6.273173' style='fill:none;stroke:%23000000;stroke-width:1.38;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' /%3E%3Cpath id='path1405' d='m 20,16 c 0,0 2,-1 3,0 1,0 1,1 2,2 0,1 0,2 0,3 0,1 0,2 0,2 0,0 -1,0 -1,0 -1,-1 -1,-1 -1,-2 0,-1 0,-1 -1,-2 0,-1 0,-2 -1,-2 -1,-1 -2,-1 -1,-1 z' style='fill:%230900ff;fill-opacity:1;stroke:%23000000;stroke-width:0.7px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1' /%3E%3C/g%3E%3C/svg%3E",X.fillIconFocused="data:image/svg+xml,%3Csvg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns%23' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' id='SVGRoot' version='1.1' viewBox='0 0 32 32' height='32px' width='32px'%3E%3Cdefs id='defs815' /%3E%3Cmetadata id='metadata818'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:format%3Eimage/svg+xml%3C/dc:format%3E%3Cdc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage' /%3E%3Cdc:title%3E%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cg id='layer1'%3E%3Cpath id='path1382' d='m 13.466084,10.267728 -4.9000003,8.4 4.9000003,4.9 8.4,-4.9 z' style='opacity:1;fill:"+X.pointHighlightColor.replace(/#/,"%23")+";fill-opacity:1;stroke:%23000000;stroke-width:1.3;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none' /%3E%3Cpath id='path1384' d='M 16.266084,15.780798 V 6.273173' style='fill:none;stroke:%23000000;stroke-width:1.38;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' /%3E%3Cpath id='path1405' d='m 20,16 c 0,0 2,-1 3,0 1,0 1,1 2,2 0,1 0,2 0,3 0,1 0,2 0,2 0,0 -1,0 -1,0 -1,-1 -1,-1 -1,-2 0,-1 0,-1 -1,-2 0,-1 0,-2 -1,-2 -1,-1 -2,-1 -1,-1 z' style='fill:%230900ff;fill-opacity:1;stroke:%23000000;stroke-width:0.7px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1' /%3E%3C/g%3E%3C/svg%3E","htmlInputId"in o&&(X.html_input=document.getElementById(o.htmlInputId));var w={showCopyright:!1,pan:{enabled:!1},zoom:{enabled:!1},showNavigation:!1,boundingBox:[-10,10,10,-10],defaultAxes:{},axis:{ticks:{label:{highlight:!1},insertTicks:!1,ticksDistance:2,minorTicks:1,minorHeight:6,majorHeight:6,tickEndings:[1,1]},highlight:!1,firstArrow:{size:7},lastArrow:{size:7},straightFirst:!1,straightLast:!1},grid:{gridX:X.snapSizeX,gridY:X.snapSizeY}};"JSXGraphOptions"in o&&$.extend(!0,w,w,o.JSXGraphOptions),X.snapRound=function(t,o){return Math.round(Math.round(t/o)*o*1e5)/1e5},X.setTextCoords=function(t,o){X.current_pos_text.setText("("+X.snapRound(t,X.snapSizeX)+", "+X.snapRound(o,X.snapSizeY)+")")},X.updateText=function(){X.html_input.value=X.graphedObjs.reduce(function(t,o){return t+(t.length?",":"")+"{"+o.stringify()+"}"},"")},X.getMouseCoords=function(t){var o;t[JXG.touchProperty]&&(o=0);var e=X.board.getCoordsTopLeftCorner(),i=JXG.getPosition(t,o),r=i[0]-e[0],n=i[1]-e[1];return new JXG.Coords(JXG.COORDS_BY_SCREEN,[r,n],X.board)},X.sign=function(t){return t=+t,Math.abs(t)<JXG.Math.eps?0:t>0?1:-1},X.pointRegexp=/\( *(-?[0-9]*(?:\.[0-9]*)?), *(-?[0-9]*(?:\.[0-9]*)?) *\)/g,X.pairedPointDrag=function(t){if(this.X()==this.paired_point.X()&&this.Y()==this.paired_point.Y()){var o=X.getMouseCoords(t),e=o.usrCoords[1]-this.paired_point.X(),i=o.usrCoords[2]-this.paired_point.Y();i>Math.abs(e)?this.setPosition(JXG.COORDS_BY_USER,[this.X(),this.Y()+X.snapSizeY]):e>Math.abs(i)?this.setPosition(JXG.COORDS_BY_USER,[this.X()+X.snapSizeX,this.Y()]):e<-Math.abs(i)?this.setPosition(JXG.COORDS_BY_USER,[this.X()-X.snapSizeX,this.Y()]):this.setPosition(JXG.COORDS_BY_USER,[this.X(),this.Y()-X.snapSizeY])}X.updateObjects(),X.updateText()},X.pairedPointDragRestricted=function(t){var o=X.getMouseCoords(t),e=this.X(),i=this.Y();this.X()==this.paired_point.X()&&(o.usrCoords[1]>this.paired_point.X()?e+=X.snapSizeX:e-=X.snapSizeX),this.Y()==this.paired_point.Y()&&(o.usrCoords[2]>this.paired_point.Y()?i+=X.snapSizeX:i-=X.snapSizeX),this.X()!=this.paired_point.X()&&this.Y()!=this.paired_point.Y()||this.setPosition(JXG.COORDS_BY_USER,[e,i]),X.updateObjects(),X.updateText()},X.createPoint=function(t,o,e,i){var r=X.board.create("point",[t,o],{size:2,snapToGrid:!0,snapSizeX:X.snapSizeX,snapSizeY:X.snapSizeY,withLabel:!1});return r.on("down",function(){X.board.containerObj.style.cursor="none"}),r.on("up",function(){X.board.containerObj.style.cursor="auto"}),void 0!==e&&(r.paired_point=e,e.paired_point=r,e.on("drag",i?X.pairedPointDragRestricted:X.pairedPointDrag),r.on("drag",i?X.pairedPointDragRestricted:X.pairedPointDrag)),r},X.updateObjects=function(){X.graphedObjs.forEach(function(t){t.update()}),X.staticObjs.forEach(function(t){t.update()})},e.prototype.blur=function(){Object.values(this.definingPts).forEach(function(t){t.setAttribute({visible:!1})}),this.baseObj.setAttribute({strokeColor:X.curveColor,strokeWidth:2})},e.prototype.focus=function(){Object.values(this.definingPts).forEach(function(t){t.setAttribute({visible:!0,strokeColor:X.focusCurveColor,strokeWidth:1,size:3,fillColor:X.pointColor,highlightStrokeColor:X.focusCurveColor,highlightFillColor:X.pointHighlightColor})}),this.baseObj.setAttribute({strokeColor:X.focusCurveColor,strokeWidth:3}),X.drawSolid=0==this.baseObj.getAttribute("dash"),"solidButton"in X&&X.solidButton.prop("disabled",X.drawSolid),"dashedButton"in X&&X.dashedButton.prop("disabled",!X.drawSolid)},e.prototype.update=function(){},e.prototype.fillCmp=function(t){return 1},e.prototype.remove=function(){Object.values(this.definingPts).forEach(function(t){X.board.removeObject(t)}),X.board.removeObject(this.baseObj)},e.prototype.setSolid=function(t){this.baseObj.setAttribute({dash:t?0:2})},e.prototype.stringify=function(){return""},e.prototype.id=function(){return this.baseObj.id},e.prototype.on=function(t,o,e){this.baseObj.on(t,o,e)},e.prototype.off=function(t,o){this.baseObj.off(t,o)},e.prototype.onResize=function(){},e.prototype.updateTextCoords=function(t){return!Object.keys(this.definingPts).every(function(o){return!this[o].hasPoint(t.scrCoords[1],t.scrCoords[2])||(X.setTextCoords(this[o].X(),this[o].Y()),!1)},this.definingPts)},e.restore=function(t){var o=t.match(/^(.*?),(.*)/);if(o.length<3)return!1;var e=!1;return Object.keys(X.graphObjectTypes).every(function(t){return o[1]!=X.graphObjectTypes[t].strId||(e=X.graphObjectTypes[t].restore(o[2]),!1)}),!1!==e&&e.blur(),e},i.prototype=Object.create(e.prototype),Object.defineProperty(i.prototype,"constructor",{value:i,enumerable:!1,writable:!0}),i.prototype.blur=function(){this.baseObj.setAttribute({highlight:!1,strokeColor:X.curveColor,strokeWidth:2})},i.prototype.focus=function(){this.baseObj.setAttribute({highlight:!0,strokeColor:X.focusCurveColor,strokeWidth:3})},i.prototype.stringify=function(){return[i.strId,"("+X.snapRound(this.baseObj.X(),X.snapSizeX)+","+X.snapRound(this.baseObj.Y(),X.snapSizeY)+")"].join(",")},i.prototype.updateTextCoords=function(t){this.baseObj.hasPoint(t.scrCoords[1],t.scrCoords[2])&&X.setTextCoords(this.baseObj.X(),this.baseObj.Y())},i.strId="point",i.restore=function(t){for(var o,e=[];o=X.pointRegexp.exec(t);)e.push(o.slice(1,3));return!(e.length<1)&&new X.graphObjectTypes.point(parseFloat(e[0][0]),parseFloat(e[0][1]),X.curveColor)},r.prototype=Object.create(e.prototype),Object.defineProperty(r.prototype,"constructor",{value:r,enumerable:!1,writable:!0}),r.prototype.stringify=function(){return[r.strId,0==this.baseObj.getAttribute("dash")?"solid":"dashed","("+X.snapRound(this.definingPts.point1.X(),X.snapSizeX)+","+X.snapRound(this.definingPts.point1.Y(),X.snapSizeY)+")","("+X.snapRound(this.definingPts.point2.X(),X.snapSizeX)+","+X.snapRound(this.definingPts.point2.Y(),X.snapSizeY)+")"].join(",")},r.prototype.fillCmp=function(t){return X.sign(JXG.Math.innerProduct(t,this.baseObj.stdform))},r.strId="line",r.restore=function(t){for(var o,e=[];o=X.pointRegexp.exec(t);)e.push(o.slice(1,3));if(e.length<2)return!1;var i=X.createPoint(parseFloat(e[0][0]),parseFloat(e[0][1])),r=X.createPoint(parseFloat(e[1][0]),parseFloat(e[1][1]),i);return new X.graphObjectTypes.line(i,r,/solid/.test(t),X.curveColor)},n.prototype=Object.create(e.prototype),Object.defineProperty(n.prototype,"constructor",{value:n,enumerable:!1,writable:!0}),n.prototype.stringify=function(){return[n.strId,0==this.baseObj.getAttribute("dash")?"solid":"dashed","("+X.snapRound(this.definingPts.center.X(),X.snapSizeX)+","+X.snapRound(this.definingPts.center.Y(),X.snapSizeY)+")","("+X.snapRound(this.definingPts.point.X(),X.snapSizeX)+","+X.snapRound(this.definingPts.point.Y(),X.snapSizeY)+")"].join(",")},n.prototype.fillCmp=function(t){return X.sign(this.baseObj.stdform[3]*(t[1]*t[1]+t[2]*t[2])+JXG.Math.innerProduct(t,this.baseObj.stdform))},n.strId="circle",n.restore=function(t){for(var o,e=[];o=X.pointRegexp.exec(t);)e.push(o.slice(1,3));if(e.length<2)return!1;var i=X.createPoint(parseFloat(e[0][0]),parseFloat(e[0][1])),r=X.createPoint(parseFloat(e[1][0]),parseFloat(e[1][1]),i);return new X.graphObjectTypes.circle(i,r,/solid/.test(t),X.curveColor)},d.prototype=Object.create(e.prototype),Object.defineProperty(d.prototype,"constructor",{value:d,enumerable:!1,writable:!0}),d.prototype.stringify=function(){return[d.strId,0==this.baseObj.getAttribute("dash")?"solid":"dashed",this.vertical?"vertical":"horizontal","("+X.snapRound(this.definingPts.vertex.X(),X.snapSizeX)+","+X.snapRound(this.definingPts.vertex.Y(),X.snapSizeY)+")","("+X.snapRound(this.definingPts.point.X(),X.snapSizeX)+","+X.snapRound(this.definingPts.point.Y(),X.snapSizeY)+")"].join(",")},d.prototype.fillCmp=function(t){return this.vertical?X.sign(t[2]-this.baseObj.Y(t[1])):X.sign(t[1]-this.baseObj.X(t[2]))},d.strId="parabola",d.restore=function(t){for(var o,e=[];o=X.pointRegexp.exec(t);)e.push(o.slice(1,3));if(e.length<2)return!1;var i=X.createPoint(parseFloat(e[0][0]),parseFloat(e[0][1])),r=X.createPoint(parseFloat(e[1][0]),parseFloat(e[1][1]),i,!0);return new X.graphObjectTypes.parabola(i,r,/vertical/.test(t),/solid/.test(t),X.curveColor)},l.prototype=Object.create(e.prototype),Object.defineProperty(l.prototype,"constructor",{value:l,enumerable:!1,writable:!0}),l.prototype.blur=function(){this.focused=!1,this.definingPts.icon.setAttribute({fixed:!0})},l.prototype.focus=function(){this.focused=!0,this.definingPts.icon.setAttribute({fixed:!1})},l.prototype.on=function(t,o,e){this.definingPts.icon.on(t,o,e)},l.prototype.off=function(t,o){this.definingPts.icon.off(t,o)},l.prototype.remove=function(){"fillObj"in this&&X.board.removeObject(this.fillObj),e.prototype.remove.call(this)},l.prototype.update=function(){if(!this.isStatic){this.updateTimeout&&clearTimeout(this.updateTimeout);var t=this;this.updateTimeout=setTimeout(function(){t.updateTimeout=0,"fillObj"in t&&(X.board.removeObject(t.fillObj),delete t.fillObj);for(var o=t.definingPts.point.coords.usrCoords,e=X.graphedObjs.concat(X.staticObjs),i=Array(e.length),r=0;r<e.length;++r)if(i[r]=e[r].fillCmp(o),0==i[r])return;var n=document.createElement("canvas");n.width=X.board.canvasWidth,n.height=X.board.canvasHeight;for(var s=n.getContext("2d"),a=s.getImageData(0,0,n.width,n.height),d=0;d<n.width;++d)for(var l=0;l<n.height;++l)(function(t,o){for(var r=[1,(t-X.board.origin.scrCoords[1])/X.board.unitX,(X.board.origin.scrCoords[2]-o)/X.board.unitY],n=0;n<e.length;++n)if(e[n].fillCmp(r)!=i[n])return!1;return!0})(d,l)&&function(t){a.data[t]=Number("0x"+X.fillColor.slice(1,3)),a.data[t+1]=Number("0x"+X.fillColor.slice(3,5)),a.data[t+2]=Number("0x"+X.fillColor.slice(5)),a.data[t+3]=255}(4*(l*n.width+d));s.putImageData(a,0,0);var p=n.toDataURL("image/png");n.remove();var c=X.board.getBoundingBox();t.fillObj=X.board.create("image",[p,[c[0],c[3]],[c[2]-c[0],c[1]-c[3]]],{withLabel:!1,highlight:!1,fixed:!0,layer:0})},100)}},l.prototype.onResize=function(){this.definingPts.icon.setPosition(JXG.COORDS_BY_USER,[this.definingPts.point.X()-12/X.board.unitX,this.definingPts.point.Y()-12/X.board.unitY]),X.board.update()},l.prototype.updateTextCoords=function(t){return!!this.definingPts.point.hasPoint(t.scrCoords[1],t.scrCoords[2])&&(X.setTextCoords(this.definingPts.point.X(),this.definingPts.point.Y()),!0)},l.prototype.stringify=function(){return[l.strId,"("+X.snapRound(this.baseObj.X(),X.snapSizeX)+","+X.snapRound(this.baseObj.Y(),X.snapSizeY)+")"].join(",")},l.strId="fill",l.restore=function(t){for(var o,e=[];o=X.pointRegexp.exec(t);)e.push(o.slice(1,3));return!!e.length&&new X.graphObjectTypes.fill(X.createPoint(parseFloat(e[0][0]),parseFloat(e[0][1])))},X.graphObjectTypes={},X.graphObjectTypes[i.strId]=i,X.graphObjectTypes[r.strId]=r,X.graphObjectTypes[d.strId]=d,X.graphObjectTypes[n.strId]=n,X.graphObjectTypes[l.strId]=l,"customGraphObjects"in o&&Object.keys(o.customGraphObjects).forEach(function(t){var o,i=this[t],r="parent"in i?i.parent?X.graphObjectTypes[i.parent]:null:e;r?(o=function(){"preInit"in i?r.call(this,i.preInit.apply(this,[X].concat(Array.prototype.slice.call(arguments)))):r.apply(this,arguments),"postInit"in i&&i.postInit.apply(this,[X].concat(Array.prototype.slice.call(arguments)))},o.prototype=Object.create(r.prototype),Object.defineProperty(o.prototype,"constructor",{value:o,enumerable:!1,writable:!0})):o=function(){i.preInit.apply(this,[X].concat(Array.prototype.slice.call(arguments)))},"blur"in i&&(o.prototype.blur=function(){i.blur.call(this,X)&&r&&r.prototype.blur.call(this)}),"focus"in i&&(o.prototype.focus=function(){i.focus.call(this,X)&&r&&r.prototype.focus.call(this)}),"update"in i&&(o.prototype.update=function(){i.update.call(this,X)}),"onResize"in i&&(o.prototype.onResize=function(){i.onResize.call(this,X)}),"updateTextCoords"in i&&(o.prototype.updateTextCoords=function(t){return i.updateTextCoords.call(this,X,t)}),"fillCmp"in i&&(o.prototype.fillCmp=function(t){return i.fillCmp.call(this,X,t)}),"remove"in i&&(o.prototype.remove=function(){i.remove.call(this,X),r&&r.prototype.remove.call(this)}),"setSolid"in i&&(o.prototype.setSolid=function(t){i.setSolid.call(this,X,t)}),"on"in i&&(o.prototype.on=function(t,o,e){i.on.call(this,t,o,e)}),"off"in i&&(o.prototype.off=function(t,o){i.off.call(this,t,o)}),"stringify"in i&&(o.prototype.stringify=function(){return[o.strId,i.stringify.call(this,X)].join(",")}),"restore"in i?o.restore=function(t){return i.restore.call(this,X,t)}:r&&(o.restore=r.restore),"helperMethods"in i&&Object.keys(i.helperMethods).forEach(function(t){o[t]=function(){return i.helperMethods[t].apply(this,[X].concat(Array.prototype.slice.call(arguments)))}}),o.strId=t,X.graphObjectTypes[o.strId]=o},o.customGraphObjects),p.prototype.activate=function(){X.activeTool.deactivate(),X.activeTool=this,this.button.blur(),this.button.prop("disabled",!0),X.selectedObj&&X.selectedObj.blur(),X.selectedObj=null},p.prototype.finish=function(){X.updateObjects(),X.updateText(),X.board.update(),X.selectTool.activate()},p.prototype.updateHighlights=function(t){return!1},p.prototype.removeHighlights=function(){Object.keys(this.hlObjs).forEach(function(t){X.board.removeObject(this[t]),delete this[t]},this.hlObjs)},p.prototype.deactivate=function(){this.button.prop("disabled",!1),this.removeHighlights()},c.prototype=Object.create(p.prototype),Object.defineProperty(c.prototype,"constructor",{value:c,enumerable:!1,writable:!0}),c.prototype.selectionChanged=function(t){if(X.selectedObj){if(X.selectedObj.id()==this.gtGraphObject.id())return;for(var o=X.getMouseCoords(t),e=Object.values(X.selectedObj.definingPts),i=0;i<e.length;++i)if(e[i].X()==X.snapRound(o.usrCoords[1],X.snapSizeX)&&e[i].Y()==X.snapRound(o.usrCoords[2],X.snapSizeY))return;X.selectedObj.blur()}X.selectedObj=this.gtGraphObject,X.selectedObj.focus()},c.prototype.activate=function(t){var o=X.selectedObj;p.prototype.activate.call(this),o&&(X.selectedObj=o),t||1!=X.graphedObjs.length||(X.selectedObj=X.graphedObjs[0]),X.selectedObj&&X.selectedObj.focus(),X.graphedObjs.forEach(function(t){t.on("down",this.selectionChanged)},this)},c.prototype.deactivate=function(){X.graphedObjs.forEach(function(t){t.off("down",this.selectionChanged)},this),p.prototype.deactivate.call(this)},u.prototype=Object.create(p.prototype),Object.defineProperty(u.prototype,"constructor",{value:u,enumerable:!1,writable:!0}),u.prototype.updateHighlights=function(t){return void 0!==t&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]):this.hlObjs.hl_point=X.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:X.underConstructionColor,fixed:!0,snapToGrid:!0,snapSizeX:X.snapSizeX,snapSizeY:X.snapSizeY,withLabel:!1}),X.setTextCoords(t.usrCoords[1],t.usrCoords[2]),X.board.update(),!0)},u.prototype.deactivate=function(){X.board.off("up"),X.board.containerObj.style.cursor="auto",p.prototype.deactivate.call(this)},u.prototype.activate=function(){p.prototype.activate.call(this),X.board.containerObj.style.cursor="none";var t=this;X.board.on("up",function(o){var e=X.getMouseCoords(o);X.board.hasPoint(e.usrCoords[1],e.usrCoords[2])&&(X.board.off("up"),X.selectedObj=new X.graphObjectTypes.point(e.usrCoords[1],e.usrCoords[2]),X.graphedObjs.push(X.selectedObj),t.finish())})},h.prototype=Object.create(p.prototype),Object.defineProperty(h.prototype,"constructor",{value:h,enumerable:!1,writable:!0}),h.prototype.updateHighlights=function(t){return"hl_line"in this.hlObjs&&this.hlObjs.hl_line.setAttribute({dash:X.drawSolid?0:2}),void 0!==t&&(!("point1"in this&&X.snapRound(t.usrCoords[1],X.snapSizeX)==this.point1.X()&&X.snapRound(t.usrCoords[2],X.snapSizeY)==this.point1.Y())&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]):(this.hlObjs.hl_point=X.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:X.underConstructionColor,fixed:!0,snapToGrid:!0,snapSizeX:X.snapSizeX,snapSizeY:X.snapSizeY,withLabel:!1}),"point1"in this&&(this.hlObjs.hl_line=X.board.create("line",[this.point1,this.hlObjs.hl_point],{fixed:!0,strokeColor:X.underConstructionColor,highlight:!1,dash:X.drawSolid?0:2}))),X.setTextCoords(this.hlObjs.hl_point.X(),this.hlObjs.hl_point.Y()),X.board.update(),!0))},h.prototype.deactivate=function(){X.board.off("up"),"point1"in this&&X.board.removeObject(this.point1),delete this.point1,X.board.containerObj.style.cursor="auto",p.prototype.deactivate.call(this)},h.prototype.activate=function(){p.prototype.activate.call(this),X.board.containerObj.style.cursor="none";var t=this;X.board.on("up",function(o){var e=X.getMouseCoords(o);X.board.hasPoint(e.usrCoords[1],e.usrCoords[2])&&(X.board.off("up"),t.point1=X.board.create("point",[e.usrCoords[1],e.usrCoords[2]],{size:2,snapToGrid:!0,snapSizeX:X.snapSizeX,snapSizeY:X.snapSizeY,withLabel:!1}),t.point1.setAttribute({fixed:!0}),t.removeHighlights(),X.board.on("up",function(o){var e=X.getMouseCoords(o);t.point1.X()==X.snapRound(e.usrCoords[1],X.snapSizeX)&&t.point1.Y()==X.snapRound(e.usrCoords[2],X.snapSizeY)||!X.board.hasPoint(e.usrCoords[1],e.usrCoords[2])||(X.board.off("up"),t.point1.setAttribute({fixed:!1}),t.point1.on("down",function(){X.board.containerObj.style.cursor="none"}),t.point1.on("up",function(){X.board.containerObj.style.cursor="auto"}),X.selectedObj=new X.graphObjectTypes.line(t.point1,X.createPoint(e.usrCoords[1],e.usrCoords[2],t.point1),X.drawSolid),X.graphedObjs.push(X.selectedObj),delete t.point1,t.finish())}),X.board.update())})},b.prototype=Object.create(p.prototype),Object.defineProperty(b.prototype,"constructor",{value:b,enumerable:!1,writable:!0}),b.prototype.updateHighlights=function(t){return"hl_circle"in this.hlObjs&&this.hlObjs.hl_circle.setAttribute({dash:X.drawSolid?0:2}),void 0!==t&&(!("center"in this&&X.snapRound(t.usrCoords[1],X.snapSizeX)==this.center.X()&&X.snapRound(t.usrCoords[2],X.snapSizeY)==this.center.Y())&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]):(this.hlObjs.hl_point=X.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:X.underConstructionColor,fixed:!0,snapToGrid:!0,snapSizeX:X.snapSizeX,snapSizeY:X.snapSizeY,withLabel:!1}),"center"in this&&(this.hlObjs.hl_circle=X.board.create("circle",[this.center,this.hlObjs.hl_point],{fixed:!0,strokeColor:X.underConstructionColor,highlight:!1,dash:X.drawSolid?0:2}))),X.setTextCoords(this.hlObjs.hl_point.X(),this.hlObjs.hl_point.Y()),X.board.update(),!0))},b.prototype.deactivate=function(){X.board.off("up"),"center"in this&&X.board.removeObject(this.center),delete this.center,X.board.containerObj.style.cursor="auto",p.prototype.deactivate.call(this)},b.prototype.activate=function(){p.prototype.activate.call(this),X.board.containerObj.style.cursor="none";var t=this;X.board.on("up",function(o){var e=X.getMouseCoords(o);X.board.hasPoint(e.usrCoords[1],e.usrCoords[2])&&(X.board.off("up"),t.center=X.board.create("point",[e.usrCoords[1],e.usrCoords[2]],{size:2,snapToGrid:!0,snapSizeX:X.snapSizeX,snapSizeY:X.snapSizeY,withLabel:!1}),t.center.setAttribute({fixed:!0}),t.removeHighlights(),X.board.on("up",function(o){var e=X.getMouseCoords(o);t.center.X()==X.snapRound(e.usrCoords[1],X.snapSizeX)&&t.center.Y()==X.snapRound(e.usrCoords[2],X.snapSizeY)||!X.board.hasPoint(e.usrCoords[1],e.usrCoords[2])||(X.board.off("up"),t.center.setAttribute({fixed:!1}),t.center.on("down",function(){X.board.containerObj.style.cursor="none"}),t.center.on("up",function(){X.board.containerObj.style.cursor="auto"}),X.selectedObj=new X.graphObjectTypes.circle(t.center,X.createPoint(e.usrCoords[1],e.usrCoords[2],t.center),X.drawSolid),X.graphedObjs.push(X.selectedObj),delete t.center,t.finish())}),X.board.update())})},f.prototype=Object.create(p.prototype),Object.defineProperty(f.prototype,"constructor",{value:f,enumerable:!1,writable:!0}),f.prototype.updateHighlights=function(t){return"hl_parabola"in this.hlObjs&&this.hlObjs.hl_parabola.setAttribute({dash:X.drawSolid?0:2}),void 0!==t&&((!("vertex"in this)||X.snapRound(t.usrCoords[1],X.snapSizeX)!=this.vertex.X()&&X.snapRound(t.usrCoords[2],X.snapSizeY)!=this.vertex.Y())&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]):(this.hlObjs.hl_point=X.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:X.underConstructionColor,fixed:!0,snapToGrid:!0,snapSizeX:X.snapSizeX,snapSizeY:X.snapSizeY,highlight:!1,withLabel:!1}),"vertex"in this&&(this.hlObjs.hl_parabola=a(this.vertex,this.hlObjs.hl_point,this.vertical,X.drawSolid,X.underConstructionColor))),X.setTextCoords(this.hlObjs.hl_point.X(),this.hlObjs.hl_point.Y()),X.board.update(),!0))},f.prototype.deactivate=function(){X.board.off("up"),"vertex"in this&&X.board.removeObject(this.vertex),delete this.vertex,X.board.containerObj.style.cursor="auto",p.prototype.deactivate.call(this)},f.prototype.activate=function(){p.prototype.activate.call(this),X.board.containerObj.style.cursor="none";var t=this;X.board.on("up",function(o){var e=X.getMouseCoords(o);X.board.hasPoint(e.usrCoords[1],e.usrCoords[2])&&(X.board.off("up"),t.vertex=X.board.create("point",[e.usrCoords[1],e.usrCoords[2]],{size:2,snapToGrid:!0,snapSizeX:X.snapSizeX,snapSizeY:X.snapSizeY,withLabel:!1}),t.vertex.setAttribute({fixed:!0}),t.removeHighlights(),X.board.on("up",function(o){var e=X.getMouseCoords(o);t.vertex.X()!=X.snapRound(e.usrCoords[1],X.snapSizeX)&&t.vertex.Y()!=X.snapRound(e.usrCoords[2],X.snapSizeY)&&X.board.hasPoint(e.usrCoords[1],e.usrCoords[2])&&(X.board.off("up"),t.vertex.setAttribute({fixed:!1}),t.vertex.on("down",function(){X.board.containerObj.style.cursor="none"}),t.vertex.on("up",function(){X.board.containerObj.style.cursor="auto"}),X.selectedObj=new X.graphObjectTypes.parabola(t.vertex,X.createPoint(e.usrCoords[1],e.usrCoords[2],t.vertex,!0),t.vertical,X.drawSolid),X.graphedObjs.push(X.selectedObj),delete t.vertex,t.finish())}),X.board.update())})},g.prototype=Object.create(f.prototype),Object.defineProperty(g.prototype,"constructor",{value:g,enumerable:!1,writable:!0}),y.prototype=Object.create(f.prototype),
Object.defineProperty(y.prototype,"constructor",{value:y,enumerable:!1,writable:!0}),O.prototype=Object.create(p.prototype),Object.defineProperty(O.prototype,"constructor",{value:O,enumerable:!1,writable:!0}),O.prototype.updateHighlights=function(t){return void 0!==t&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[X.snapRound(t.usrCoords[1],X.snapSizeX)-12/X.board.unitX,X.snapRound(t.usrCoords[2],X.snapSizeY)-12/X.board.unitY]):this.hlObjs.hl_point=X.board.create("image",[X.fillIcon,[X.snapRound(t.usrCoords[1],X.snapSizeX)-12/X.board.unitX,X.snapRound(t.usrCoords[2],X.snapSizeY)-12/X.board.unitY],[24/X.board.unitX,24/X.board.unitY]],{withLabel:!1,highlight:!1,layer:9}),X.setTextCoords(t.usrCoords[1],t.usrCoords[2]),X.board.update(),!0)},O.prototype.deactivate=function(){X.board.off("up"),X.board.containerObj.style.cursor="auto",p.prototype.deactivate.call(this)},O.prototype.activate=function(){p.prototype.activate.call(this),X.board.containerObj.style.cursor="none",X.board.on("up",function(t){X.board.off("up");var o=X.getMouseCoords(t);X.board.hasPoint(o.usrCoords[1],o.usrCoords[2])&&(X.board.off("up"),X.selectedObj=new X.graphObjectTypes.fill(X.createPoint(o.usrCoords[1],o.usrCoords[2])),X.graphedObjs.push(X.selectedObj),X.updateText(),X.board.update(),X.selectTool.activate())})},X.toolTypes={PointTool:u,LineTool:h,CircleTool:b,VerticalParabolaTool:g,HorizontalParabolaTool:y,FillTool:O,SolidDashTool:m};var Y=$("<div id='"+t+"_graph' class='jxgbox graphtool-graph'></div>");if(x.append(Y),!X.isStatic){var T=$("<div class='gt-toolbar-container'></div>");X.selectTool=new c(T),"customTools"in o&&Object.keys(o.customTools).forEach(function(t){var o,e=this[t],i="parent"in e?e.parent?X.toolTypes[e.parent]:null:p;i?(o=function(t){i.call(this,t,e.iconName,e.tooltip),"initialize"in e&&e.initialize.call(this,X,t)},o.prototype=Object.create(i.prototype),Object.defineProperty(o.prototype,"constructor",{value:o,enumerable:!1,writable:!0})):o=function(){e.initialize.call(this,X,container)},"activate"in e&&(o.prototype.activate=function(){i.prototype.activate.call(this),e.activate.call(this,X)}),"deactivate"in e&&(o.prototype.deactivate=function(){e.deactivate.call(this,X),i.prototype.deactivate.call(this)}),"updateHighlights"in e&&(o.prototype.updateHighlights=function(t){return e.updateHighlights.call(this,X,t)}),"removeHighlights"in e&&(o.prototype.removeHighlights=function(){e.removeHighlights.call(this,X),i.prototype.removeHighlights.call(this)}),"helperMethods"in e&&Object.keys(e.helperMethods).forEach(function(t){o[t]=function(){return e.helperMethods[t].apply(this,[X].concat(Array.prototype.slice.call(arguments)))}}),X.toolTypes[t]=o},o.customTools),z.forEach(function(t){t in X.toolTypes?new X.toolTypes[t](T):console.log("Unknown tool: "+t)}),T.append($("<button type=button class='btn gt-button' data-toggle='tooltip' title='Delete Selected Object'>Delete</button>").on("click",v)),T.append($("<button type=button class='btn gt-button' data-toggle='tooltip' title='Clear All Objects From Graph'>Clear</button>").on("click",j)),x.append(T),$('.gt-button[data-toggle="tooltip"]').tooltip({trigger:"hover",placement:"bottom",delay:{show:1e3,hide:0}})}!function(){X.board=JXG.JSXGraph.initBoard(t+"_graph",w),X.board.suspendUpdate();var o=X.board.getBoundingBox();X.board.defaultAxes.x.point1.setPosition(JXG.COORDS_BY_USER,[o[0],0]),X.board.defaultAxes.x.point2.setPosition(JXG.COORDS_BY_USER,[o[2],0]),X.board.defaultAxes.y.point1.setPosition(JXG.COORDS_BY_USER,[0,o[3]]),X.board.defaultAxes.y.point2.setPosition(JXG.COORDS_BY_USER,[0,o[1]]),X.board.create("text",[function(){return X.board.getBoundingBox()[2]-3/X.board.unitX},function(){return 1.5/X.board.unitY},function(){return"\\(x\\)"}],{anchorX:"right",anchorY:"bottom",highlight:!1,color:"black",fixed:!0,useMathJax:!0}),X.board.create("text",[function(){return 4.5/X.board.unitX},function(){return X.board.getBoundingBox()[1]+2.5/X.board.unitY},function(){return"\\(y\\)"}],{anchorX:"left",anchorY:"top",highlight:!1,color:"black",fixed:!0,useMathJax:!0}),X.current_pos_text=X.board.create("text",[function(){return X.board.getBoundingBox()[2]-5/X.board.unitX},function(){return X.board.getBoundingBox()[3]+5/X.board.unitY},""],{anchorX:"right",anchorY:"bottom",fixed:!0}),X.board.highlightInfobox=function(t,o,e){return X.board.highlightCustomInfobox("",e)},X.isStatic||(X.board.on("move",function(t){var o=X.getMouseCoords(t);X.activeTool.updateHighlights(o)||X.selectedObj&&X.selectedObj.updateTextCoords(o)||X.setTextCoords(o.usrCoords[1],o.usrCoords[2])}),$(document).on("keydown.ToolDeactivate",function(t){"Escape"===t.key&&X.selectTool.activate()})),$(window).resize(function(t){X.board.canvasWidth==Y.width()&&X.board.canvasHeight==Y.height()||(X.board.resizeContainer(Y.width(),Y.height(),!0),X.graphedObjs.forEach(function(t){t.onResize()}),X.staticObjs.forEach(function(t){t.onResize()}))}),X.drawSolid=!0,X.graphedObjs=[],X.staticObjs=[],X.selectedObj=null,X.board.unsuspendUpdate()}(),"html_input"in X&&S(X.html_input.value,!1),"staticObjects"in o&&"string"==typeof o.staticObjects&&o.staticObjects.length&&S(o.staticObjects,!0),X.isStatic||(X.updateText(),X.activeTool=X.selectTool,X.activeTool.activate(!0))}}Object.values||(Object.values=function(t){return Object.keys(t).map(function(o){return t[o]})});
