"use strict";if(!Object.values)Object.values=function(e){return Object.keys(e).map(function(t){return e[t]})};function graphTool(e,t){if(document.getElementById(e+"_graph"))return;var o=$("#"+e);if(o.css("width")=="0px"){setTimeout(function(){graphTool(e,t)},100);return}var f={};f.curveColor="#0000a6";f.focusCurveColor="#0000f5";f.fillColor="#a384e5";f.pointColor="orange";f.pointHighlightColor="yellow";f.underConstructionColor="orange";f.snapSizeX=t.snapSizeX?t.snapSizeX:1;f.snapSizeY=t.snapSizeY?t.snapSizeY:1;f.isStatic="isStatic"in t?t.isStatic:false;var i=t.availableTools?t.availableTools:["LineTool","CircleTool","VerticalParabolaTool","HorizontalParabolaTool","FillTool","SolidDashTool"];f.fillIcon="data:image/svg+xml,%3Csvg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns%23' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' id='SVGRoot' version='1.1' viewBox='0 0 32 32' height='32px' width='32px'%3E%3Cdefs id='defs815' /%3E%3Cmetadata id='metadata818'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:format%3Eimage/svg+xml%3C/dc:format%3E%3Cdc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage' /%3E%3Cdc:title%3E%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cg id='layer1'%3E%3Cpath id='path1382' d='m 13.466084,10.267728 -4.9000003,8.4 4.9000003,4.9 8.4,-4.9 z' style='opacity:1;fill:"+f.fillColor.replace(/#/,"%23")+";fill-opacity:1;stroke:%23000000;stroke-width:1.3;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none' /%3E%3Cpath id='path1384' d='M 16.266084,15.780798 V 6.273173' style='fill:none;stroke:%23000000;stroke-width:1.38;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' /%3E%3Cpath id='path1405' d='m 20,16 c 0,0 2,-1 3,0 1,0 1,1 2,2 0,1 0,2 0,3 0,1 0,2 0,2 0,0 -1,0 -1,0 -1,-1 -1,-1 -1,-2 0,-1 0,-1 -1,-2 0,-1 0,-2 -1,-2 -1,-1 -2,-1 -1,-1 z' style='fill:%230900ff;fill-opacity:1;stroke:%23000000;stroke-width:0.7px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1' /%3E%3C/g%3E%3C/svg%3E";f.fillIconFocused="data:image/svg+xml,%3Csvg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns%23' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' id='SVGRoot' version='1.1' viewBox='0 0 32 32' height='32px' width='32px'%3E%3Cdefs id='defs815' /%3E%3Cmetadata id='metadata818'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:format%3Eimage/svg+xml%3C/dc:format%3E%3Cdc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage' /%3E%3Cdc:title%3E%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cg id='layer1'%3E%3Cpath id='path1382' d='m 13.466084,10.267728 -4.9000003,8.4 4.9000003,4.9 8.4,-4.9 z' style='opacity:1;fill:"+f.pointHighlightColor.replace(/#/,"%23")+";fill-opacity:1;stroke:%23000000;stroke-width:1.3;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none' /%3E%3Cpath id='path1384' d='M 16.266084,15.780798 V 6.273173' style='fill:none;stroke:%23000000;stroke-width:1.38;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' /%3E%3Cpath id='path1405' d='m 20,16 c 0,0 2,-1 3,0 1,0 1,1 2,2 0,1 0,2 0,3 0,1 0,2 0,2 0,0 -1,0 -1,0 -1,-1 -1,-1 -1,-2 0,-1 0,-1 -1,-2 0,-1 0,-2 -1,-2 -1,-1 -2,-1 -1,-1 z' style='fill:%230900ff;fill-opacity:1;stroke:%23000000;stroke-width:0.7px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1' /%3E%3C/g%3E%3C/svg%3E";if("htmlInputId"in t)f.html_input=document.getElementById(t.htmlInputId);var r={showCopyright:false,pan:{enabled:false},zoom:{enabled:false},showNavigation:false,boundingBox:[-10,10,10,-10],defaultAxes:{},axis:{ticks:{label:{highlight:false},insertTicks:false,ticksDistance:2,minorTicks:1,minorHeight:6,majorHeight:6,tickEndings:[1,1]},highlight:false,firstArrow:{size:7},lastArrow:{size:7},straightFirst:false,straightLast:false},grid:{gridX:f.snapSizeX,gridY:f.snapSizeY}};if("JSXGraphOptions"in t)$.extend(true,r,r,t.JSXGraphOptions);function s(){f.board=JXG.JSXGraph.initBoard(e+"_graph",r);f.board.suspendUpdate();var t=f.board.getBoundingBox();f.board.defaultAxes.x.point1.setPosition(JXG.COORDS_BY_USER,[t[0],0]);f.board.defaultAxes.x.point2.setPosition(JXG.COORDS_BY_USER,[t[2],0]);f.board.defaultAxes.y.point1.setPosition(JXG.COORDS_BY_USER,[0,t[3]]);f.board.defaultAxes.y.point2.setPosition(JXG.COORDS_BY_USER,[0,t[1]]);f.board.create("text",[function(){return f.board.getBoundingBox()[2]-3/f.board.unitX},function(){return 1.5/f.board.unitY},function(){return"\\(x\\)"}],{anchorX:"right",anchorY:"bottom",highlight:false,color:"black",fixed:true,useMathJax:true});f.board.create("text",[function(){return 4.5/f.board.unitX},function(){return f.board.getBoundingBox()[1]+2.5/f.board.unitY},function(){return"\\(y\\)"}],{anchorX:"left",anchorY:"top",highlight:false,color:"black",fixed:true,useMathJax:true});f.current_pos_text=f.board.create("text",[function(){return f.board.getBoundingBox()[2]-5/f.board.unitX},function(){return f.board.getBoundingBox()[3]+5/f.board.unitY},""],{anchorX:"right",anchorY:"bottom",fixed:true});f.board.highlightInfobox=function(t,e,o){return f.board.highlightCustomInfobox("",o)};if(!f.isStatic){f.board.on("move",function(t){var e=f.getMouseCoords(t);if(f.activeTool.updateHighlights(e))return;if(!f.selectedObj||!f.selectedObj.updateTextCoords(e))f.setTextCoords(e.usrCoords[1],e.usrCoords[2])});$(document).on("keydown.ToolDeactivate",function(t){if(t.key==="Escape")f.selectTool.activate()})}$(window).resize(function(t){if(f.board.canvasWidth!=w.width()||f.board.canvasHeight!=w.height()){f.board.resizeContainer(w.width(),w.height(),true);f.graphedObjs.forEach(function(t){t.onResize()});f.staticObjs.forEach(function(t){t.onResize()})}});f.drawSolid=true;f.graphedObjs=[];f.staticObjs=[];f.selectedObj=null;f.board.unsuspendUpdate()}f.snapRound=function(t,e){return Math.round(Math.round(t/e)*e*1e5)/1e5};f.setTextCoords=function(t,e){f.current_pos_text.setText("("+f.snapRound(t,f.snapSizeX)+", "+f.snapRound(e,f.snapSizeY)+")")};f.updateText=function(){f.html_input.value=f.graphedObjs.reduce(function(t,e){return t+(t.length?",":"")+"{"+e.stringify()+"}"},"")};f.getMouseCoords=function(t){var e;if(t[JXG.touchProperty]){e=0}var o=f.board.getCoordsTopLeftCorner(),i=JXG.getPosition(t,e),r=i[0]-o[0],s=i[1]-o[1];return new JXG.Coords(JXG.COORDS_BY_SCREEN,[r,s],f.board)};f.sign=function(t){t=+t;if(Math.abs(t)<JXG.Math.eps){return 0}return t>0?1:-1};f.pointRegexp=/\( *(-?[0-9]*(?:\.[0-9]*)?), *(-?[0-9]*(?:\.[0-9]*)?) *\)/g;f.pairedPointDrag=function(t){if(this.X()==this.paired_point.X()&&this.Y()==this.paired_point.Y()){var e=f.getMouseCoords(t);var o=e.usrCoords[1]-this.paired_point.X(),i=e.usrCoords[2]-this.paired_point.Y();if(i>Math.abs(o))this.setPosition(JXG.COORDS_BY_USER,[this.X(),this.Y()+f.snapSizeY]);else if(o>Math.abs(i))this.setPosition(JXG.COORDS_BY_USER,[this.X()+f.snapSizeX,this.Y()]);else if(o<-Math.abs(i))this.setPosition(JXG.COORDS_BY_USER,[this.X()-f.snapSizeX,this.Y()]);else this.setPosition(JXG.COORDS_BY_USER,[this.X(),this.Y()-f.snapSizeY])}f.updateObjects();f.updateText()};f.pairedPointDragRestricted=function(t){var e=f.getMouseCoords(t);var o=this.X(),i=this.Y();if(this.X()==this.paired_point.X()){if(e.usrCoords[1]>this.paired_point.X())o+=f.snapSizeX;else o-=f.snapSizeX}if(this.Y()==this.paired_point.Y()){if(e.usrCoords[2]>this.paired_point.Y())i+=f.snapSizeX;else i-=f.snapSizeX}if(this.X()==this.paired_point.X()||this.Y()==this.paired_point.Y())this.setPosition(JXG.COORDS_BY_USER,[o,i]);f.updateObjects();f.updateText()};f.createPoint=function(t,e,o,i){var r=f.board.create("point",[t,e],{size:2,snapToGrid:true,snapSizeX:f.snapSizeX,snapSizeY:f.snapSizeY,withLabel:false});r.on("down",function(){f.board.containerObj.style.cursor="none"});r.on("up",function(){f.board.containerObj.style.cursor="auto"});if(typeof o!=="undefined"){r.paired_point=o;o.paired_point=r;o.on("drag",i?f.pairedPointDragRestricted:f.pairedPointDrag);r.on("drag",i?f.pairedPointDragRestricted:f.pairedPointDrag)}return r};f.updateObjects=function(){f.graphedObjs.forEach(function(t){t.update()});f.staticObjs.forEach(function(t){t.update()})};function n(t){this.baseObj=t;this.baseObj.gtGraphObject=this;this.definingPts={}}n.prototype.blur=function(){Object.values(this.definingPts).forEach(function(t){t.setAttribute({visible:false})});this.baseObj.setAttribute({strokeColor:f.curveColor,strokeWidth:2})};n.prototype.focus=function(){Object.values(this.definingPts).forEach(function(t){t.setAttribute({visible:true,strokeColor:f.focusCurveColor,strokeWidth:1,size:3,fillColor:f.pointColor,highlightStrokeColor:f.focusCurveColor,highlightFillColor:f.pointHighlightColor})});this.baseObj.setAttribute({strokeColor:f.focusCurveColor,strokeWidth:3});f.drawSolid=this.baseObj.getAttribute("dash")==0;if("solidButton"in f)f.solidButton.prop("disabled",f.drawSolid);if("dashedButton"in f)f.dashedButton.prop("disabled",!f.drawSolid)};n.prototype.update=function(){};n.prototype.fillCmp=function(t){return 1};n.prototype.remove=function(){Object.values(this.definingPts).forEach(function(t){f.board.removeObject(t)});f.board.removeObject(this.baseObj)};n.prototype.setSolid=function(t){this.baseObj.setAttribute({dash:t?0:2})};n.prototype.stringify=function(){return""};n.prototype.id=function(){return this.baseObj.id};n.prototype.on=function(t,e,o){this.baseObj.on(t,e,o)};n.prototype.off=function(t,e){this.baseObj.off(t,e)};n.prototype.onResize=function(){};n.prototype.updateTextCoords=function(e){return!Object.keys(this.definingPts).every(function(t){if(this[t].hasPoint(e.scrCoords[1],e.scrCoords[2])){f.setTextCoords(this[t].X(),this[t].Y());return false}return true},this.definingPts)};n.restore=function(t){var e=t.match(/^(.*?),(.*)/);if(e.length<3)return false;var o=false;Object.keys(f.graphObjectTypes).every(function(t){if(e[1]==f.graphObjectTypes[t].strId){o=f.graphObjectTypes[t].restore(e[2]);return false}return true});if(o!==false)o.blur();return o};function a(t,e,o,i){n.call(this,f.board.create("line",[t,e],{fixed:true,highlight:false,strokeColor:i?i:f.underConstructionColor,dash:o?0:2}));this.definingPts.point1=t;this.definingPts.point2=e}a.prototype=Object.create(n.prototype);Object.defineProperty(a.prototype,"constructor",{value:a,enumerable:false,writable:true});a.prototype.stringify=function(){return[a.strId,this.baseObj.getAttribute("dash")==0?"solid":"dashed","("+f.snapRound(this.definingPts.point1.X(),f.snapSizeX)+","+f.snapRound(this.definingPts.point1.Y(),f.snapSizeY)+")","("+f.snapRound(this.definingPts.point2.X(),f.snapSizeX)+","+f.snapRound(this.definingPts.point2.Y(),f.snapSizeY)+")"].join(",")};a.prototype.fillCmp=function(t){return f.sign(JXG.Math.innerProduct(t,this.baseObj.stdform))};a.strId="line";a.restore=function(t){var e;var o=[];while(e=f.pointRegexp.exec(t)){o.push(e.slice(1,3))}if(o.length<2)return false;var i=f.createPoint(parseFloat(o[0][0]),parseFloat(o[0][1]));var r=f.createPoint(parseFloat(o[1][0]),parseFloat(o[1][1]),i);return new f.graphObjectTypes.line(i,r,/solid/.test(t),f.curveColor)};function l(t,e,o,i){n.call(this,f.board.create("circle",[t,e],{fixed:true,highlight:false,strokeColor:i?i:f.underConstructionColor,dash:o?0:2}));this.definingPts.center=t;this.definingPts.point=e}l.prototype=Object.create(n.prototype);Object.defineProperty(l.prototype,"constructor",{value:l,enumerable:false,writable:true});l.prototype.stringify=function(){return[l.strId,this.baseObj.getAttribute("dash")==0?"solid":"dashed","("+f.snapRound(this.definingPts.center.X(),f.snapSizeX)+","+f.snapRound(this.definingPts.center.Y(),f.snapSizeY)+")","("+f.snapRound(this.definingPts.point.X(),f.snapSizeX)+","+f.snapRound(this.definingPts.point.Y(),f.snapSizeY)+")"].join(",")};l.prototype.fillCmp=function(t){return f.sign(this.baseObj.stdform[3]*(t[1]*t[1]+t[2]*t[2])+JXG.Math.innerProduct(t,this.baseObj.stdform))};l.strId="circle";l.restore=function(t){var e;var o=[];while(e=f.pointRegexp.exec(t)){o.push(e.slice(1,3))}if(o.length<2)return false;var i=f.createPoint(parseFloat(o[0][0]),parseFloat(o[0][1]));var r=f.createPoint(parseFloat(o[1][0]),parseFloat(o[1][1]),i);return new f.graphObjectTypes.circle(i,r,/solid/.test(t),f.curveColor)};function d(t,e,o){return o?(e.Y()-t.Y())/Math.pow(e.X()-t.X(),2):(e.X()-t.X())/Math.pow(e.Y()-t.Y(),2)}function p(e,o,i,t,r){if(i)return f.board.create("curve",[function(t){return t},function(t){return d(e,o,i)*Math.pow(t-e.X(),2)+e.Y()},function(){return f.board.getBoundingBox()[0]},function(){return f.board.getBoundingBox()[2]}],{strokeWidth:2,highlight:false,strokeColor:r?r:f.underConstructionColor,dash:t?0:2});else return f.board.create("curve",[function(t){return d(e,o,i)*Math.pow(t-e.Y(),2)+e.X()},function(t){return t},function(){return f.board.getBoundingBox()[3]},function(){return f.board.getBoundingBox()[1]}],{strokeWidth:2,highlight:false,strokeColor:r?r:f.underConstructionColor,dash:t?0:2})}function u(t,e,o,i,r){n.call(this,p(t,e,o,i,r));this.definingPts.vertex=t;this.definingPts.point=e;this.vertical=o}u.prototype=Object.create(n.prototype);Object.defineProperty(u.prototype,"constructor",{value:u,enumerable:false,writable:true});u.prototype.stringify=function(){return[u.strId,this.baseObj.getAttribute("dash")==0?"solid":"dashed",this.vertical?"vertical":"horizontal","("+f.snapRound(this.definingPts.vertex.X(),f.snapSizeX)+","+f.snapRound(this.definingPts.vertex.Y(),f.snapSizeY)+")","("+f.snapRound(this.definingPts.point.X(),f.snapSizeX)+","+f.snapRound(this.definingPts.point.Y(),f.snapSizeY)+")"].join(",")};u.prototype.fillCmp=function(t){if(this.vertical)return f.sign(t[2]-this.baseObj.Y(t[1]));else return f.sign(t[1]-this.baseObj.X(t[2]))};u.strId="parabola";u.restore=function(t){var e;var o=[];while(e=f.pointRegexp.exec(t)){o.push(e.slice(1,3))}if(o.length<2)return false;var i=f.createPoint(parseFloat(o[0][0]),parseFloat(o[0][1]));var r=f.createPoint(parseFloat(o[1][0]),parseFloat(o[1][1]),i,true);return new f.graphObjectTypes.parabola(i,r,/vertical/.test(t),/solid/.test(t),f.curveColor)};function c(t){t.setAttribute({visible:false});n.call(this,t);this.focused=true;this.definingPts.point=t;this.updateTimeout=0;this.update();var r=this;this.definingPts.icon=f.board.create("image",[function(){return r.focused?f.fillIconFocused:f.fillIcon},[t.X()-12/f.board.unitX,t.Y()-12/f.board.unitY],[function(){return 24/f.board.unitX},function(){return 24/f.board.unitY}]],{withLabel:false,highlight:false,layer:9,name:"FillIcon"});this.definingPts.icon.gtGraphObject=this;this.definingPts.icon.point=t;this.isStatic=f.isStatic;if(!f.isStatic){this.on("down",function(){f.board.containerObj.style.cursor="none"});this.on("up",function(){f.board.containerObj.style.cursor="auto"});this.on("drag",function(t){var e=f.getMouseCoords(t);var o=f.snapRound(e.usrCoords[1],f.snapSizeX),i=f.snapRound(e.usrCoords[2],f.snapSizeY);this.setPosition(JXG.COORDS_BY_USER,[o-12/f.board.unitX,i-12/f.board.unitY]);this.point.setPosition(JXG.COORDS_BY_USER,[o,i]);r.update();f.updateText()})}}c.prototype=Object.create(n.prototype);Object.defineProperty(c.prototype,"constructor",{value:c,enumerable:false,writable:true});c.prototype.blur=function(){this.focused=false;this.definingPts.icon.setAttribute({fixed:true})};c.prototype.focus=function(){this.focused=true;this.definingPts.icon.setAttribute({fixed:false})};c.prototype.on=function(t,e,o){this.definingPts.icon.on(t,e,o)};c.prototype.off=function(t,e){this.definingPts.icon.off(t,e)};c.prototype.remove=function(){if("fillObj"in this)f.board.removeObject(this.fillObj);n.prototype.remove.call(this)};c.prototype.update=function(){if(this.isStatic)return;if(this.updateTimeout)clearTimeout(this.updateTimeout);var h=this;this.updateTimeout=setTimeout(function(){h.updateTimeout=0;if("fillObj"in h){f.board.removeObject(h.fillObj);delete h.fillObj}var t=h.definingPts.point.coords.usrCoords;var r=f.graphedObjs.concat(f.staticObjs);var s=Array(r.length);for(var e=0;e<r.length;++e){s[e]=r[e].fillCmp(t);if(s[e]==0)return}var o=document.createElement("canvas");o.width=f.board.canvasWidth;o.height=f.board.canvasHeight;var i=o.getContext("2d");var n=i.getImageData(0,0,o.width,o.height);var a=function(t){n.data[t]=Number("0x"+f.fillColor.slice(1,3));n.data[t+1]=Number("0x"+f.fillColor.slice(3,5));n.data[t+2]=Number("0x"+f.fillColor.slice(5));n.data[t+3]=255};var l=function(t,e){var o=[1,(t-f.board.origin.scrCoords[1])/f.board.unitX,(f.board.origin.scrCoords[2]-e)/f.board.unitY];for(var i=0;i<r.length;++i){if(r[i].fillCmp(o)!=s[i])return false}return true};for(var d=0;d<o.width;++d){for(var p=0;p<o.height;++p){if(l(d,p))a((p*o.width+d)*4)}}i.putImageData(n,0,0);var u=o.toDataURL("image/png");o.remove();var c=f.board.getBoundingBox();h.fillObj=f.board.create("image",[u,[c[0],c[3]],[c[2]-c[0],c[1]-c[3]]],{withLabel:false,highlight:false,fixed:true,layer:0})},100)};c.prototype.onResize=function(){this.definingPts.icon.setPosition(JXG.COORDS_BY_USER,[this.definingPts.point.X()-12/f.board.unitX,this.definingPts.point.Y()-12/f.board.unitY]);f.board.update()};c.prototype.updateTextCoords=function(t){if(this.definingPts.point.hasPoint(t.scrCoords[1],t.scrCoords[2])){f.setTextCoords(this.definingPts.point.X(),this.definingPts.point.Y());return true}return false};c.prototype.stringify=function(){return[c.strId,"("+f.snapRound(this.baseObj.X(),f.snapSizeX)+","+f.snapRound(this.baseObj.Y(),f.snapSizeY)+")"].join(",")};c.strId="fill";c.restore=function(t){var e;var o=[];while(e=f.pointRegexp.exec(t)){o.push(e.slice(1,3))}if(!o.length)return false;return new f.graphObjectTypes.fill(f.createPoint(parseFloat(o[0][0]),parseFloat(o[0][1])))};f.graphObjectTypes={};f.graphObjectTypes[a.strId]=a;f.graphObjectTypes[u.strId]=u;f.graphObjectTypes[l.strId]=l;f.graphObjectTypes[c.strId]=c;if("customGraphObjects"in t){Object.keys(t.customGraphObjects).forEach(function(t){var i=this[t];var e="parent"in i?i.parent?f.graphObjectTypes[i.parent]:null:n;var o;if(e){o=function(){if("preInit"in i)e.call(this,i.preInit.apply(this,[f].concat(Array.prototype.slice.call(arguments))));else e.apply(this,arguments);if("postInit"in i)i.postInit.apply(this,[f].concat(Array.prototype.slice.call(arguments)))};o.prototype=Object.create(e.prototype);Object.defineProperty(o.prototype,"constructor",{value:o,enumerable:false,writable:true})}else{o=function(){i.preInit.apply(this,[f].concat(Array.prototype.slice.call(arguments)))}}if("blur"in i){o.prototype.blur=function(){if(i.blur.call(this,f)&&e){e.prototype.blur.call(this)}}}if("focus"in i){o.prototype.focus=function(){if(i.focus.call(this,f)&&e){e.prototype.focus.call(this)}}}if("update"in i){o.prototype.update=function(){i.update.call(this,f)}}if("onResize"in i){o.prototype.onResize=function(){i.onResize.call(this,f)}}if("updateTextCoords"in i){o.prototype.updateTextCoords=function(t){return i.updateTextCoords.call(this,f,t)}}if("fillCmp"in i){o.prototype.fillCmp=function(t){return i.fillCmp.call(this,f,t)}}if("remove"in i){o.prototype.remove=function(){i.remove.call(this,f);if(e)e.prototype.remove.call(this)}}if("setSolid"in i){o.prototype.setSolid=function(t){i.setSolid.call(this,f,t)}}if("on"in i){o.prototype.on=function(t,e,o){i.on.call(this,t,e,o)}}if("off"in i){o.prototype.off=function(t,e){i.off.call(this,t,e)}}if("stringify"in i){o.prototype.stringify=function(){return[o.strId,i.stringify.call(this,f)].join(",")}}if("restore"in i){o.restore=function(t){return i.restore.call(this,f,t)}}else if(e)o.restore=e.restore;if("helperMethods"in i){Object.keys(i.helperMethods).forEach(function(t){o[t]=function(){return i.helperMethods[t].apply(this,[f].concat(Array.prototype.slice.call(arguments)))}})}o.strId=t;f.graphObjectTypes[o.strId]=o},t.customGraphObjects)}function h(t,e,o){this.button=$("<button type=button class='btn gt-button gt-tool-button gt-"+e+"-tool' data-tooltip='"+o+"'>&nbsp;</button>");var i=this;this.button.on("click",function(){i.activate()});t.append(this.button);this.hlObjs={}}h.prototype.activate=function(){f.activeTool.deactivate();f.activeTool=this;this.button.blur();this.button.prop("disabled",true);if(f.selectedObj){f.selectedObj.blur()}f.selectedObj=null};h.prototype.finish=function(){f.updateObjects();f.updateText();f.board.update();f.selectTool.activate()};h.prototype.updateHighlights=function(t){return false};h.prototype.removeHighlights=function(){Object.keys(this.hlObjs).forEach(function(t){f.board.removeObject(this[t]);delete this[t]},this.hlObjs)};h.prototype.deactivate=function(){this.button.prop("disabled",false);this.removeHighlights()};function b(t){h.call(this,t,"select","Object Selection Tool")}b.prototype=Object.create(h.prototype);Object.defineProperty(b.prototype,"constructor",{value:b,enumerable:false,writable:true});b.prototype.selectionChanged=function(t){if(f.selectedObj){if(f.selectedObj.id()!=this.gtGraphObject.id()){var e=f.getMouseCoords(t);var o=Object.values(f.selectedObj.definingPts);for(var i=0;i<o.length;++i){if(o[i].X()==f.snapRound(e.usrCoords[1],f.snapSizeX)&&o[i].Y()==f.snapRound(e.usrCoords[2],f.snapSizeY))return}f.selectedObj.blur()}else return}f.selectedObj=this.gtGraphObject;f.selectedObj.focus()};b.prototype.activate=function(t){var e=f.selectedObj;h.prototype.activate.call(this);if(e)f.selectedObj=e;if(!t&&f.graphedObjs.length==1){f.selectedObj=f.graphedObjs[0]}if(f.selectedObj){f.selectedObj.focus()}f.graphedObjs.forEach(function(t){t.on("down",this.selectionChanged)},this)};b.prototype.deactivate=function(){f.graphedObjs.forEach(function(t){t.off("down",this.selectionChanged)},this);h.prototype.deactivate.call(this)};function g(t,e,o){h.call(this,t,e?e:"line",o?o:"Line Tool")}g.prototype=Object.create(h.prototype);Object.defineProperty(g.prototype,"constructor",{value:g,enumerable:false,writable:true});g.prototype.updateHighlights=function(t){if("hl_line"in this.hlObjs)this.hlObjs.hl_line.setAttribute({dash:f.drawSolid?0:2});if(typeof t==="undefined")return false;if("point1"in this&&f.snapRound(t.usrCoords[1],f.snapSizeX)==this.point1.X()&&f.snapRound(t.usrCoords[2],f.snapSizeY)==this.point1.Y())return false;if(!("hl_point"in this.hlObjs)){this.hlObjs.hl_point=f.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:f.underConstructionColor,fixed:true,snapToGrid:true,snapSizeX:f.snapSizeX,snapSizeY:f.snapSizeY,withLabel:false});if("point1"in this)this.hlObjs.hl_line=f.board.create("line",[this.point1,this.hlObjs.hl_point],{fixed:true,strokeColor:f.underConstructionColor,highlight:false,dash:f.drawSolid?0:2})}else this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]);f.setTextCoords(this.hlObjs.hl_point.X(),this.hlObjs.hl_point.Y());f.board.update();return true};g.prototype.deactivate=function(){f.board.off("up");if("point1"in this)f.board.removeObject(this.point1);delete this.point1;f.board.containerObj.style.cursor="auto";h.prototype.deactivate.call(this)};g.prototype.activate=function(){h.prototype.activate.call(this);f.board.containerObj.style.cursor="none";var o=this;f.board.on("up",function(t){var e=f.getMouseCoords(t);if(!f.board.hasPoint(e.usrCoords[1],e.usrCoords[2]))return;f.board.off("up");o.point1=f.board.create("point",[e.usrCoords[1],e.usrCoords[2]],{size:2,snapToGrid:true,snapSizeX:f.snapSizeX,snapSizeY:f.snapSizeY,withLabel:false});o.point1.setAttribute({fixed:true});o.removeHighlights();f.board.on("up",function(t){var e=f.getMouseCoords(t);if(o.point1.X()==f.snapRound(e.usrCoords[1],f.snapSizeX)&&o.point1.Y()==f.snapRound(e.usrCoords[2],f.snapSizeY)||!f.board.hasPoint(e.usrCoords[1],e.usrCoords[2]))return;f.board.off("up");o.point1.setAttribute({fixed:false});o.point1.on("down",function(){f.board.containerObj.style.cursor="none"});o.point1.on("up",function(){f.board.containerObj.style.cursor="auto"});f.selectedObj=new f.graphObjectTypes.line(o.point1,f.createPoint(e.usrCoords[1],e.usrCoords[2],o.point1),f.drawSolid);f.graphedObjs.push(f.selectedObj);delete o.point1;o.finish()});f.board.update()})};function y(t,e,o){h.call(this,t,e?e:"circle",o?o:"Circle Tool")}y.prototype=Object.create(h.prototype);Object.defineProperty(y.prototype,"constructor",{value:y,enumerable:false,writable:true});y.prototype.updateHighlights=function(t){if("hl_circle"in this.hlObjs)this.hlObjs.hl_circle.setAttribute({dash:f.drawSolid?0:2});if(typeof t==="undefined")return false;if("center"in this&&f.snapRound(t.usrCoords[1],f.snapSizeX)==this.center.X()&&f.snapRound(t.usrCoords[2],f.snapSizeY)==this.center.Y())return false;if(!("hl_point"in this.hlObjs)){this.hlObjs.hl_point=f.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:f.underConstructionColor,fixed:true,snapToGrid:true,snapSizeX:f.snapSizeX,snapSizeY:f.snapSizeY,withLabel:false});if("center"in this)this.hlObjs.hl_circle=f.board.create("circle",[this.center,this.hlObjs.hl_point],{fixed:true,strokeColor:f.underConstructionColor,highlight:false,dash:f.drawSolid?0:2})}else this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]);f.setTextCoords(this.hlObjs.hl_point.X(),this.hlObjs.hl_point.Y());f.board.update();return true};y.prototype.deactivate=function(){f.board.off("up");if("center"in this)f.board.removeObject(this.center);delete this.center;f.board.containerObj.style.cursor="auto";h.prototype.deactivate.call(this)};y.prototype.activate=function(){h.prototype.activate.call(this);f.board.containerObj.style.cursor="none";var o=this;f.board.on("up",function(t){var e=f.getMouseCoords(t);if(!f.board.hasPoint(e.usrCoords[1],e.usrCoords[2]))return;f.board.off("up");o.center=f.board.create("point",[e.usrCoords[1],e.usrCoords[2]],{size:2,snapToGrid:true,snapSizeX:f.snapSizeX,snapSizeY:f.snapSizeY,withLabel:false});o.center.setAttribute({fixed:true});o.removeHighlights();f.board.on("up",function(t){var e=f.getMouseCoords(t);if(o.center.X()==f.snapRound(e.usrCoords[1],f.snapSizeX)&&o.center.Y()==f.snapRound(e.usrCoords[2],f.snapSizeY)||!f.board.hasPoint(e.usrCoords[1],e.usrCoords[2]))return;f.board.off("up");o.center.setAttribute({fixed:false});o.center.on("down",function(){f.board.containerObj.style.cursor="none"});o.center.on("up",function(){f.board.containerObj.style.cursor="auto"});f.selectedObj=new f.graphObjectTypes.circle(o.center,f.createPoint(e.usrCoords[1],e.usrCoords[2],o.center),f.drawSolid);f.graphedObjs.push(f.selectedObj);delete o.center;o.finish()});f.board.update()})};function v(t,e,o,i){h.call(this,t,o?o:e?"vertical-parabola":"horizontal-parabola",i?i:e?"Vertical Parabola Tool":"Horizontal Parabola Tool");this.vertical=e}v.prototype=Object.create(h.prototype);Object.defineProperty(v.prototype,"constructor",{value:v,enumerable:false,writable:true});v.prototype.updateHighlights=function(t){if("hl_parabola"in this.hlObjs)this.hlObjs.hl_parabola.setAttribute({dash:f.drawSolid?0:2});if(typeof t==="undefined")return false;if("vertex"in this&&(f.snapRound(t.usrCoords[1],f.snapSizeX)==this.vertex.X()||f.snapRound(t.usrCoords[2],f.snapSizeY)==this.vertex.Y()))return false;if(!("hl_point"in this.hlObjs)){this.hlObjs.hl_point=f.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:f.underConstructionColor,fixed:true,snapToGrid:true,snapSizeX:f.snapSizeX,snapSizeY:f.snapSizeY,highlight:false,withLabel:false});if("vertex"in this)this.hlObjs.hl_parabola=p(this.vertex,this.hlObjs.hl_point,this.vertical,f.drawSolid,f.underConstructionColor)}else this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]);f.setTextCoords(this.hlObjs.hl_point.X(),this.hlObjs.hl_point.Y());f.board.update();return true};v.prototype.deactivate=function(){f.board.off("up");if("vertex"in this)f.board.removeObject(this.vertex);delete this.vertex;f.board.containerObj.style.cursor="auto";h.prototype.deactivate.call(this)};v.prototype.activate=function(){h.prototype.activate.call(this);f.board.containerObj.style.cursor="none";var o=this;f.board.on("up",function(t){var e=f.getMouseCoords(t);if(!f.board.hasPoint(e.usrCoords[1],e.usrCoords[2]))return;f.board.off("up");o.vertex=f.board.create("point",[e.usrCoords[1],e.usrCoords[2]],{size:2,snapToGrid:true,snapSizeX:f.snapSizeX,snapSizeY:f.snapSizeY,withLabel:false});o.vertex.setAttribute({fixed:true});o.removeHighlights();f.board.on("up",function(t){var e=f.getMouseCoords(t);if(o.vertex.X()==f.snapRound(e.usrCoords[1],f.snapSizeX)||o.vertex.Y()==f.snapRound(e.usrCoords[2],f.snapSizeY)||!f.board.hasPoint(e.usrCoords[1],e.usrCoords[2]))return;f.board.off("up");o.vertex.setAttribute({fixed:false});o.vertex.on("down",function(){f.board.containerObj.style.cursor="none"});o.vertex.on("up",function(){f.board.containerObj.style.cursor="auto"});f.selectedObj=new f.graphObjectTypes.parabola(o.vertex,f.createPoint(e.usrCoords[1],e.usrCoords[2],o.vertex,true),o.vertical,f.drawSolid);f.graphedObjs.push(f.selectedObj);delete o.vertex;o.finish()});f.board.update()})};function O(t,e,o){v.call(this,t,true,e,o)}O.prototype=Object.create(v.prototype);Object.defineProperty(O.prototype,"constructor",{value:O,enumerable:false,writable:true});function C(t,e,o){v.call(this,t,false,e,o)}C.prototype=Object.create(v.prototype);Object.defineProperty(C.prototype,"constructor",{value:C,enumerable:false,writable:true});function j(t,e,o){h.call(this,t,e?e:"fill",o?o:"Region Shading Tool")}j.prototype=Object.create(h.prototype);Object.defineProperty(j.prototype,"constructor",{value:j,enumerable:false,writable:true});j.prototype.updateHighlights=function(t){if(typeof t==="undefined")return false;if(!("hl_point"in this.hlObjs)){this.hlObjs.hl_point=f.board.create("image",[f.fillIcon,[f.snapRound(t.usrCoords[1],f.snapSizeX)-12/f.board.unitX,f.snapRound(t.usrCoords[2],f.snapSizeY)-12/f.board.unitY],[24/f.board.unitX,24/f.board.unitY]],{withLabel:false,highlight:false,layer:9})}else this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[f.snapRound(t.usrCoords[1],f.snapSizeX)-12/f.board.unitX,f.snapRound(t.usrCoords[2],f.snapSizeY)-12/f.board.unitY]);f.setTextCoords(t.usrCoords[1],t.usrCoords[2]);f.board.update();return true};j.prototype.deactivate=function(){f.board.off("up");f.board.containerObj.style.cursor="auto";h.prototype.deactivate.call(this)};j.prototype.activate=function(){h.prototype.activate.call(this);f.board.containerObj.style.cursor="none";f.board.on("up",function(t){f.board.off("up");var e=f.getMouseCoords(t);if(!f.board.hasPoint(e.usrCoords[1],e.usrCoords[2]))return;f.board.off("up");f.selectedObj=new f.graphObjectTypes.fill(f.createPoint(e.usrCoords[1],e.usrCoords[2]));f.graphedObjs.push(f.selectedObj);f.updateText();f.board.update();f.selectTool.activate()})};function m(t){this.blur();if("solidButton"in f)f.solidButton.prop("disabled",t.data.solid);if("dashedButton"in f)f.dashedButton.prop("disabled",!t.data.solid);if(f.selectedObj){f.selectedObj.setSolid(t.data.solid);f.updateText()}f.drawSolid=t.data.solid;f.activeTool.updateHighlights()}function S(){this.blur();if(!f.selectedObj)return;$("<div>Do you want to delete the selected object?</div>").dialog({title:"Delete Selected Object",width:"auto",height:"auto",modal:true,resizable:false,buttons:{Yes:function(){for(var t=0;t<f.graphedObjs.length;++t){if(f.graphedObjs[t].id()===f.selectedObj.id()){f.graphedObjs[t].remove();f.graphedObjs.splice(t,1);break}}f.selectedObj=null;f.updateObjects();f.updateText();$(this).dialog("close")},No:function(){$(this).dialog("close")}},close:function(){$(this).remove()}})}function x(){this.blur();if(f.graphedObjs.length==0)return;$("<div>Do you want to remove all graphed objects?</div>").dialog({title:"Clear Graph",width:"auto",height:"auto",modal:true,resizable:false,buttons:{Yes:function(){f.graphedObjs.forEach(function(t){t.remove()});f.graphedObjs=[];f.selectedObj=null;f.selectTool.activate();f.html_input.value="";$(this).dialog("close")},No:function(){$(this).dialog("close")}},close:function(){$(this).remove()}})}function X(t){var e=$("<div class='gt-solid-dash-box'></div>");f.solidButton=$("<button type=button class='btn gt-button gt-tool-button gt-solid-tool' "+"data-tooltip='Make Selected Object Solid' disabled>&nbsp;</button>").on("click",{solid:true},m);e.append(f.solidButton);f.dashedButton=$("<button type=button class='btn gt-button gt-tool-button gt-dashed-tool' "+"data-tooltip='Make Selected Object Dashed'>&nbsp;</button>").on("click",{solid:false},m);e.append(f.dashedButton);t.append(e)}f.toolTypes={LineTool:g,CircleTool:y,VerticalParabolaTool:O,HorizontalParabolaTool:C,FillTool:j,SolidDashTool:X};var w=$("<div id='"+e+"_graph' class='jxgbox graphtool-graph'></div>");o.append(w);if(!f.isStatic){var z=$("<div class='gt-toolbar-container'></div>");f.selectTool=new b(z);if("customTools"in t){Object.keys(t.customTools).forEach(function(t){var e=this[t];var o="parent"in e?e.parent?f.toolTypes[e.parent]:null:h;var i;if(o){i=function(t){o.call(this,t,e.iconName,e.tooltip);if("initialize"in e)e.initialize.call(this,f,t)};i.prototype=Object.create(o.prototype);Object.defineProperty(i.prototype,"constructor",{value:i,enumerable:false,writable:true})}else{i=function(){e.initialize.call(this,f,container)}}if("activate"in e){i.prototype.activate=function(){o.prototype.activate.call(this);e.activate.call(this,f)}}if("deactivate"in e){i.prototype.deactivate=function(){e.deactivate.call(this,f);o.prototype.deactivate.call(this)}}if("updateHighlights"in e){i.prototype.updateHighlights=function(t){return e.updateHighlights.call(this,f,t)}}if("removeHighlights"in e){i.prototype.removeHighlights=function(){e.removeHighlights.call(this,f);o.prototype.removeHighlights.call(this)}}if("helperMethods"in e){Object.keys(e.helperMethods).forEach(function(t){i[t]=function(){return e.helperMethods[t].apply(this,[f].concat(Array.prototype.slice.call(arguments)))}})}f.toolTypes[t]=i},t.customTools)}i.forEach(function(t){if(t in f.toolTypes){new f.toolTypes[t](z)}else console.log("Unknown tool: "+t)});z.append($("<button type=button class='btn gt-button' "+"data-tooltip='Delete Selected Object'>Delete</button>").on("click",S));z.append($("<button type=button class='btn gt-button' "+"data-tooltip='Clear All Objects From Graph'>Clear</button>").on("click",x));o.append(z);$.widget.bridge("uitooltip",$.ui.tooltip);$(".gt-button").uitooltip({items:"[data-tooltip]",position:{my:"center top",at:"center bottom+5px"},show:{delay:1e3,effect:"none"},hide:{delay:0,effect:"none"},content:function(){var t=$(this);if(t.is("[data-tooltip]")){return t.attr("data-tooltip")}}})}s();function Y(t,e){f.board.suspendUpdate();var o=f.isStatic;f.isStatic=e;var i=/{(.*?)}/g;var r;while(r=i.exec(t)){var s=n.restore(r[1]);if(s!==false){if(e)f.staticObjs.push(s);else f.graphedObjs.push(s)}}f.isStatic=o;f.updateObjects();f.board.unsuspendUpdate()}if("html_input"in f)Y(f.html_input.value,false);if("staticObjects"in t&&typeof t.staticObjects==="string"&&t.staticObjects.length)Y(t.staticObjects,true);if(!f.isStatic){f.updateText();f.activeTool=f.selectTool;f.activeTool.activate(true)}}