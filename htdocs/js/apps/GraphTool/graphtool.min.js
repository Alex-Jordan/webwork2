"use strict";function graphTool(o,t){var e,u,i,r,n,s;function a(t){this.baseObj=t,(this.baseObj.gtGraphObject=this).definingPts={}}function d(t,o,e){a.call(this,u.board.create("point",[t,o],{size:2,snapToGrid:!0,snapSizeX:u.snapSizeX,snapSizeY:u.snapSizeY,withLabel:!1,strokeColor:e||u.underConstructionColor,fixed:u.isStatic,highlightStrokeColor:u.underConstructionColor,highlightFillColor:u.pointHighlightColor})),u.isStatic||(this.on("down",function(){u.board.containerObj.style.cursor="none"}),this.on("up",function(){u.board.containerObj.style.cursor="auto"}),this.on("drag",u.updateText))}function l(t,o,e,i){a.call(this,u.board.create("line",[t,o],{fixed:!0,highlight:!1,strokeColor:i||u.underConstructionColor,dash:e?0:2})),this.definingPts.point1=t,this.definingPts.point2=o}function p(t,o,e,i){a.call(this,u.board.create("circle",[t,o],{fixed:!0,highlight:!1,strokeColor:i||u.underConstructionColor,dash:e?0:2})),this.definingPts.center=t,this.definingPts.point=o}function c(t,o,e){return e?(o.Y()-t.Y())/Math.pow(o.X()-t.X(),2):(o.X()-t.X())/Math.pow(o.Y()-t.Y(),2)}function h(o,e,i,t,r){return i?u.board.create("curve",[function(t){return t},function(t){return c(o,e,i)*Math.pow(t-o.X(),2)+o.Y()},function(){return u.board.getBoundingBox()[0]},function(){return u.board.getBoundingBox()[2]}],{strokeWidth:2,highlight:!1,strokeColor:r||u.underConstructionColor,dash:t?0:2}):u.board.create("curve",[function(t){return c(o,e,i)*Math.pow(t-o.Y(),2)+o.X()},function(t){return t},function(){return u.board.getBoundingBox()[3]},function(){return u.board.getBoundingBox()[1]}],{strokeWidth:2,highlight:!1,strokeColor:r||u.underConstructionColor,dash:t?0:2})}function b(t,o,e,i,r){a.call(this,h(t,o,e,i,r)),this.definingPts.vertex=t,this.definingPts.point=o,this.vertical=e}function f(t){t.setAttribute({visible:!1}),a.call(this,t),this.focused=!0,this.definingPts.point=t,this.updateTimeout=0,this.update();var e=this;this.definingPts.icon=u.board.create("image",[function(){return e.focused?u.fillIconFocused:u.fillIcon},[t.X()-12/u.board.unitX,t.Y()-12/u.board.unitY],[function(){return 24/u.board.unitX},function(){return 24/u.board.unitY}]],{withLabel:!1,highlight:!1,layer:9,name:"FillIcon"}),(this.definingPts.icon.gtGraphObject=this).definingPts.icon.point=t,this.isStatic=u.isStatic,u.isStatic||(this.on("down",function(){u.board.containerObj.style.cursor="none"}),this.on("up",function(){u.board.containerObj.style.cursor="auto"}),this.on("drag",function(t){var o=u.getMouseCoords(t),t=u.snapRound(o.usrCoords[1],u.snapSizeX),o=u.snapRound(o.usrCoords[2],u.snapSizeY);this.setPosition(JXG.COORDS_BY_USER,[t-12/u.board.unitX,o-12/u.board.unitY]),this.point.setPosition(JXG.COORDS_BY_USER,[t,o]),e.update(),u.updateText()}))}function g(t,o,e){this.button=$("<button type=button class='btn gt-button gt-tool-button gt-"+o+"-tool' data-toggle='tooltip' title='"+e+"'>&nbsp;</button>");var i=this;this.button.on("click",function(){i.activate()}),t.append(this.button),this.hlObjs={}}function y(t){g.call(this,t,"select","Object Selection Tool")}function O(t,o,e){g.call(this,t,o||"point",e||"Point Tool")}function C(t,o,e){g.call(this,t,o||"line",e||"Line Tool")}function j(t,o,e){g.call(this,t,o||"circle",e||"Circle Tool")}function v(t,o,e,i){g.call(this,t,e||(o?"vertical-parabola":"horizontal-parabola"),i||(o?"Vertical Parabola Tool":"Horizontal Parabola Tool")),this.vertical=o}function m(t,o,e){v.call(this,t,!0,o,e)}function S(t,o,e){v.call(this,t,!1,o,e)}function x(t,o,e){g.call(this,t,o||"fill",e||"Region Shading Tool")}function X(t){this.blur(),"solidButton"in u&&u.solidButton.prop("disabled",t.data.solid),"dashedButton"in u&&u.dashedButton.prop("disabled",!t.data.solid),u.selectedObj&&(u.selectedObj.setSolid(t.data.solid),u.updateText()),u.drawSolid=t.data.solid,u.activeTool.updateHighlights()}function w(t,o){u.board.suspendUpdate();var e=u.isStatic;u.isStatic=o;for(var i=/{(.*?)}/g;r=i.exec(t);){var r=a.restore(r[1]);!1!==r&&(o?u.staticObjs:u.graphedObjs).push(r)}u.isStatic=e,u.updateObjects(),u.board.unsuspendUpdate()}document.getElementById(o+"_graph")||("0px"!=(e=$("#"+o)).css("width")?((u={curveColor:"#0000a6",focusCurveColor:"#0000f5",fillColor:"#a384e5",pointColor:"orange",pointHighlightColor:"yellow",underConstructionColor:"orange"}).snapSizeX=t.snapSizeX||1,u.snapSizeY=t.snapSizeY||1,u.isStatic="isStatic"in t&&t.isStatic,i=t.availableTools||["LineTool","CircleTool","VerticalParabolaTool","HorizontalParabolaTool","FillTool","SolidDashTool"],u.fillIcon="data:image/svg+xml,%3Csvg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns%23' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' id='SVGRoot' version='1.1' viewBox='0 0 32 32' height='32px' width='32px'%3E%3Cdefs id='defs815' /%3E%3Cmetadata id='metadata818'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:format%3Eimage/svg+xml%3C/dc:format%3E%3Cdc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage' /%3E%3Cdc:title%3E%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cg id='layer1'%3E%3Cpath id='path1382' d='m 13.466084,10.267728 -4.9000003,8.4 4.9000003,4.9 8.4,-4.9 z' style='opacity:1;fill:"+u.fillColor.replace(/#/,"%23")+";fill-opacity:1;stroke:%23000000;stroke-width:1.3;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none' /%3E%3Cpath id='path1384' d='M 16.266084,15.780798 V 6.273173' style='fill:none;stroke:%23000000;stroke-width:1.38;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' /%3E%3Cpath id='path1405' d='m 20,16 c 0,0 2,-1 3,0 1,0 1,1 2,2 0,1 0,2 0,3 0,1 0,2 0,2 0,0 -1,0 -1,0 -1,-1 -1,-1 -1,-2 0,-1 0,-1 -1,-2 0,-1 0,-2 -1,-2 -1,-1 -2,-1 -1,-1 z' style='fill:%230900ff;fill-opacity:1;stroke:%23000000;stroke-width:0.7px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1' /%3E%3C/g%3E%3C/svg%3E",u.fillIconFocused="data:image/svg+xml,%3Csvg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns%23' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' id='SVGRoot' version='1.1' viewBox='0 0 32 32' height='32px' width='32px'%3E%3Cdefs id='defs815' /%3E%3Cmetadata id='metadata818'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:format%3Eimage/svg+xml%3C/dc:format%3E%3Cdc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage' /%3E%3Cdc:title%3E%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cg id='layer1'%3E%3Cpath id='path1382' d='m 13.466084,10.267728 -4.9000003,8.4 4.9000003,4.9 8.4,-4.9 z' style='opacity:1;fill:"+u.pointHighlightColor.replace(/#/,"%23")+";fill-opacity:1;stroke:%23000000;stroke-width:1.3;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none' /%3E%3Cpath id='path1384' d='M 16.266084,15.780798 V 6.273173' style='fill:none;stroke:%23000000;stroke-width:1.38;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' /%3E%3Cpath id='path1405' d='m 20,16 c 0,0 2,-1 3,0 1,0 1,1 2,2 0,1 0,2 0,3 0,1 0,2 0,2 0,0 -1,0 -1,0 -1,-1 -1,-1 -1,-2 0,-1 0,-1 -1,-2 0,-1 0,-2 -1,-2 -1,-1 -2,-1 -1,-1 z' style='fill:%230900ff;fill-opacity:1;stroke:%23000000;stroke-width:0.7px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1' /%3E%3C/g%3E%3C/svg%3E","htmlInputId"in t&&(u.html_input=document.getElementById(t.htmlInputId)),r={showCopyright:!1,pan:{enabled:!1},zoom:{enabled:!1},showNavigation:!1,boundingBox:[-10,10,10,-10],defaultAxes:{},axis:{ticks:{label:{highlight:!1},insertTicks:!1,ticksDistance:2,minorTicks:1,minorHeight:6,majorHeight:6,tickEndings:[1,1]},highlight:!1,firstArrow:{size:7},lastArrow:{size:7},straightFirst:!1,straightLast:!1},grid:{gridX:u.snapSizeX,gridY:u.snapSizeY}},"JSXGraphOptions"in t&&$.extend(!0,r,r,t.JSXGraphOptions),u.snapRound=function(t,o){return Math.round(Math.round(t/o)*o*1e5)/1e5},u.setTextCoords=t.showCoordinateHints?function(t,o){u.current_pos_text.setText("("+u.snapRound(t,u.snapSizeX)+", "+u.snapRound(o,u.snapSizeY)+")")}:function(){},u.updateText=function(){u.html_input.value=u.graphedObjs.reduce(function(t,o){return t+(t.length?",":"")+"{"+o.stringify()+"}"},"")},u.getMouseCoords=function(t){t[JXG.touchProperty]&&(e=0);var o=u.board.getCoordsTopLeftCorner(),t=JXG.getPosition(t,e),e=t[0]-o[0],o=t[1]-o[1];return new JXG.Coords(JXG.COORDS_BY_SCREEN,[e,o],u.board)},u.sign=function(t){return t=+t,Math.abs(t)<JXG.Math.eps?0:0<t?1:-1},u.pointRegexp=/\( *(-?[0-9]*(?:\.[0-9]*)?), *(-?[0-9]*(?:\.[0-9]*)?) *\)/g,u.pairedPointDrag=function(t){var o;this.X()==this.paired_point.X()&&this.Y()==this.paired_point.Y()&&(t=(o=u.getMouseCoords(t)).usrCoords[1]-this.paired_point.X(),(o=o.usrCoords[2]-this.paired_point.Y())>Math.abs(t)?this.setPosition(JXG.COORDS_BY_USER,[this.X(),this.Y()+u.snapSizeY]):t>Math.abs(o)?this.setPosition(JXG.COORDS_BY_USER,[this.X()+u.snapSizeX,this.Y()]):t<-Math.abs(o)?this.setPosition(JXG.COORDS_BY_USER,[this.X()-u.snapSizeX,this.Y()]):this.setPosition(JXG.COORDS_BY_USER,[this.X(),this.Y()-u.snapSizeY])),u.updateObjects(),u.updateText()},u.pairedPointDragRestricted=function(t){var o=u.getMouseCoords(t),e=this.X(),t=this.Y();this.X()==this.paired_point.X()&&(o.usrCoords[1]>this.paired_point.X()?e+=u.snapSizeX:e-=u.snapSizeX),this.Y()==this.paired_point.Y()&&(o.usrCoords[2]>this.paired_point.Y()?t+=u.snapSizeX:t-=u.snapSizeX),this.X()!=this.paired_point.X()&&this.Y()!=this.paired_point.Y()||this.setPosition(JXG.COORDS_BY_USER,[e,t]),u.updateObjects(),u.updateText()},u.createPoint=function(t,o,e,i){o=u.board.create("point",[t,o],{size:2,snapToGrid:!0,snapSizeX:u.snapSizeX,snapSizeY:u.snapSizeY,withLabel:!1});return o.on("down",function(){u.board.containerObj.style.cursor="none"}),o.on("up",function(){u.board.containerObj.style.cursor="auto"}),void 0!==e&&((o.paired_point=e).paired_point=o,e.on("drag",i?u.pairedPointDragRestricted:u.pairedPointDrag),o.on("drag",i?u.pairedPointDragRestricted:u.pairedPointDrag)),o},u.updateObjects=function(){u.graphedObjs.forEach(function(t){t.update()}),u.staticObjs.forEach(function(t){t.update()})},a.prototype.blur=function(){Object.values(this.definingPts).forEach(function(t){t.setAttribute({visible:!1})}),this.baseObj.setAttribute({strokeColor:u.curveColor,strokeWidth:2})},a.prototype.focus=function(){Object.values(this.definingPts).forEach(function(t){t.setAttribute({visible:!0,strokeColor:u.focusCurveColor,strokeWidth:1,size:3,fillColor:u.pointColor,highlightStrokeColor:u.focusCurveColor,highlightFillColor:u.pointHighlightColor})}),this.baseObj.setAttribute({strokeColor:u.focusCurveColor,strokeWidth:3}),u.drawSolid=0==this.baseObj.getAttribute("dash"),"solidButton"in u&&u.solidButton.prop("disabled",u.drawSolid),"dashedButton"in u&&u.dashedButton.prop("disabled",!u.drawSolid)},a.prototype.update=function(){},a.prototype.fillCmp=function(t){return 1},a.prototype.remove=function(){Object.values(this.definingPts).forEach(function(t){u.board.removeObject(t)}),u.board.removeObject(this.baseObj)},a.prototype.setSolid=function(t){this.baseObj.setAttribute({dash:t?0:2})},a.prototype.stringify=function(){return""},a.prototype.id=function(){return this.baseObj.id},a.prototype.on=function(t,o,e){this.baseObj.on(t,o,e)},a.prototype.off=function(t,o){this.baseObj.off(t,o)},a.prototype.onResize=function(){},a.prototype.updateTextCoords=function(o){return!Object.keys(this.definingPts).every(function(t){return!this[t].hasPoint(o.scrCoords[1],o.scrCoords[2])||(u.setTextCoords(this[t].X(),this[t].Y()),!1)},this.definingPts)},a.restore=function(t){var o=t.match(/^(.*?),(.*)/);if(o.length<3)return!1;var e=!1;return Object.keys(u.graphObjectTypes).every(function(t){return o[1]!=u.graphObjectTypes[t].strId||(e=u.graphObjectTypes[t].restore(o[2]),!1)}),!1!==e&&e.blur(),e},d.prototype=Object.create(a.prototype),Object.defineProperty(d.prototype,"constructor",{value:d,enumerable:!1,writable:!0}),d.prototype.blur=function(){this.baseObj.setAttribute({highlight:!1,strokeColor:u.curveColor,strokeWidth:2})},d.prototype.focus=function(){this.baseObj.setAttribute({highlight:!0,strokeColor:u.focusCurveColor,strokeWidth:3})},d.prototype.stringify=function(){return[d.strId,"("+u.snapRound(this.baseObj.X(),u.snapSizeX)+","+u.snapRound(this.baseObj.Y(),u.snapSizeY)+")"].join(",")},d.prototype.updateTextCoords=function(t){this.baseObj.hasPoint(t.scrCoords[1],t.scrCoords[2])&&u.setTextCoords(this.baseObj.X(),this.baseObj.Y())},d.strId="point",d.restore=function(t){for(var o,e=[];o=u.pointRegexp.exec(t);)e.push(o.slice(1,3));return!(e.length<1)&&new u.graphObjectTypes.point(parseFloat(e[0][0]),parseFloat(e[0][1]),u.curveColor)},l.prototype=Object.create(a.prototype),Object.defineProperty(l.prototype,"constructor",{value:l,enumerable:!1,writable:!0}),l.prototype.stringify=function(){return[l.strId,0==this.baseObj.getAttribute("dash")?"solid":"dashed","("+u.snapRound(this.definingPts.point1.X(),u.snapSizeX)+","+u.snapRound(this.definingPts.point1.Y(),u.snapSizeY)+")","("+u.snapRound(this.definingPts.point2.X(),u.snapSizeX)+","+u.snapRound(this.definingPts.point2.Y(),u.snapSizeY)+")"].join(",")},l.prototype.fillCmp=function(t){return u.sign(JXG.Math.innerProduct(t,this.baseObj.stdform))},l.strId="line",l.restore=function(t){for(var o,e=[];o=u.pointRegexp.exec(t);)e.push(o.slice(1,3));if(e.length<2)return!1;var i=u.createPoint(parseFloat(e[0][0]),parseFloat(e[0][1])),r=u.createPoint(parseFloat(e[1][0]),parseFloat(e[1][1]),i);return new u.graphObjectTypes.line(i,r,/solid/.test(t),u.curveColor)},p.prototype=Object.create(a.prototype),Object.defineProperty(p.prototype,"constructor",{value:p,enumerable:!1,writable:!0}),p.prototype.stringify=function(){return[p.strId,0==this.baseObj.getAttribute("dash")?"solid":"dashed","("+u.snapRound(this.definingPts.center.X(),u.snapSizeX)+","+u.snapRound(this.definingPts.center.Y(),u.snapSizeY)+")","("+u.snapRound(this.definingPts.point.X(),u.snapSizeX)+","+u.snapRound(this.definingPts.point.Y(),u.snapSizeY)+")"].join(",")},p.prototype.fillCmp=function(t){return u.sign(this.baseObj.stdform[3]*(t[1]*t[1]+t[2]*t[2])+JXG.Math.innerProduct(t,this.baseObj.stdform))},p.strId="circle",p.restore=function(t){for(var o,e=[];o=u.pointRegexp.exec(t);)e.push(o.slice(1,3));if(e.length<2)return!1;var i=u.createPoint(parseFloat(e[0][0]),parseFloat(e[0][1])),r=u.createPoint(parseFloat(e[1][0]),parseFloat(e[1][1]),i);return new u.graphObjectTypes.circle(i,r,/solid/.test(t),u.curveColor)},b.prototype=Object.create(a.prototype),Object.defineProperty(b.prototype,"constructor",{value:b,enumerable:!1,writable:!0}),b.prototype.stringify=function(){return[b.strId,0==this.baseObj.getAttribute("dash")?"solid":"dashed",this.vertical?"vertical":"horizontal","("+u.snapRound(this.definingPts.vertex.X(),u.snapSizeX)+","+u.snapRound(this.definingPts.vertex.Y(),u.snapSizeY)+")","("+u.snapRound(this.definingPts.point.X(),u.snapSizeX)+","+u.snapRound(this.definingPts.point.Y(),u.snapSizeY)+")"].join(",")},b.prototype.fillCmp=function(t){return this.vertical?u.sign(t[2]-this.baseObj.Y(t[1])):u.sign(t[1]-this.baseObj.X(t[2]))},b.strId="parabola",b.restore=function(t){for(var o,e=[];o=u.pointRegexp.exec(t);)e.push(o.slice(1,3));if(e.length<2)return!1;var i=u.createPoint(parseFloat(e[0][0]),parseFloat(e[0][1])),r=u.createPoint(parseFloat(e[1][0]),parseFloat(e[1][1]),i,!0);return new u.graphObjectTypes.parabola(i,r,/vertical/.test(t),/solid/.test(t),u.curveColor)},f.prototype=Object.create(a.prototype),Object.defineProperty(f.prototype,"constructor",{value:f,enumerable:!1,writable:!0}),f.prototype.blur=function(){this.focused=!1,this.definingPts.icon.setAttribute({fixed:!0})},f.prototype.focus=function(){this.focused=!0,this.definingPts.icon.setAttribute({fixed:!1})},f.prototype.on=function(t,o,e){this.definingPts.icon.on(t,o,e)},f.prototype.off=function(t,o){this.definingPts.icon.off(t,o)},f.prototype.remove=function(){"fillObj"in this&&u.board.removeObject(this.fillObj),a.prototype.remove.call(this)},f.prototype.update=function(){var c;this.isStatic||(this.updateTimeout&&clearTimeout(this.updateTimeout),(c=this).updateTimeout=setTimeout(function(){c.updateTimeout=0,"fillObj"in c&&(u.board.removeObject(c.fillObj),delete c.fillObj);for(var t=c.definingPts.point.coords.usrCoords,r=u.graphedObjs.concat(u.staticObjs),n=Array(r.length),o=0;o<r.length;++o)if(n[o]=r[o].fillCmp(t),0==n[o])return;var e=document.createElement("canvas");e.width=u.board.canvasWidth,e.height=u.board.canvasHeight;for(var i,s=e.getContext("2d"),a=s.getImageData(0,0,e.width,e.height),d=0;d<e.width;++d)for(var l=0;l<e.height;++l)!function(t,o){for(var e=[1,(t-u.board.origin.scrCoords[1])/u.board.unitX,(u.board.origin.scrCoords[2]-o)/u.board.unitY],i=0;i<r.length;++i)if(r[i].fillCmp(e)!=n[i])return!1;return!0}(d,l)||(i=4*(l*e.width+d),a.data[i]=Number("0x"+u.fillColor.slice(1,3)),a.data[i+1]=Number("0x"+u.fillColor.slice(3,5)),a.data[i+2]=Number("0x"+u.fillColor.slice(5)),a.data[i+3]=255);s.putImageData(a,0,0);var p=e.toDataURL("image/png");e.remove();s=u.board.getBoundingBox();c.fillObj=u.board.create("image",[p,[s[0],s[3]],[s[2]-s[0],s[1]-s[3]]],{withLabel:!1,highlight:!1,fixed:!0,layer:0})},100))},f.prototype.onResize=function(){this.definingPts.icon.setPosition(JXG.COORDS_BY_USER,[this.definingPts.point.X()-12/u.board.unitX,this.definingPts.point.Y()-12/u.board.unitY]),u.board.update()},f.prototype.updateTextCoords=function(t){return!!this.definingPts.point.hasPoint(t.scrCoords[1],t.scrCoords[2])&&(u.setTextCoords(this.definingPts.point.X(),this.definingPts.point.Y()),!0)},f.prototype.stringify=function(){return[f.strId,"("+u.snapRound(this.baseObj.X(),u.snapSizeX)+","+u.snapRound(this.baseObj.Y(),u.snapSizeY)+")"].join(",")},f.strId="fill",f.restore=function(t){for(var o,e=[];o=u.pointRegexp.exec(t);)e.push(o.slice(1,3));return!!e.length&&new u.graphObjectTypes.fill(u.createPoint(parseFloat(e[0][0]),parseFloat(e[0][1])))},u.graphObjectTypes={},u.graphObjectTypes[d.strId]=d,u.graphObjectTypes[l.strId]=l,u.graphObjectTypes[b.strId]=b,u.graphObjectTypes[p.strId]=p,u.graphObjectTypes[f.strId]=f,"customGraphObjects"in t&&Object.keys(t.customGraphObjects).forEach(function(t){var o,i=this[t],e="parent"in i?i.parent?u.graphObjectTypes[i.parent]:null:a;e?((o=function(){"preInit"in i?e.call(this,i.preInit.apply(this,[u].concat(Array.prototype.slice.call(arguments)))):e.apply(this,arguments),"postInit"in i&&i.postInit.apply(this,[u].concat(Array.prototype.slice.call(arguments)))}).prototype=Object.create(e.prototype),Object.defineProperty(o.prototype,"constructor",{value:o,enumerable:!1,writable:!0})):o=function(){i.preInit.apply(this,[u].concat(Array.prototype.slice.call(arguments)))},"blur"in i&&(o.prototype.blur=function(){i.blur.call(this,u)&&e&&e.prototype.blur.call(this)}),"focus"in i&&(o.prototype.focus=function(){i.focus.call(this,u)&&e&&e.prototype.focus.call(this)}),"update"in i&&(o.prototype.update=function(){i.update.call(this,u)}),"onResize"in i&&(o.prototype.onResize=function(){i.onResize.call(this,u)}),"updateTextCoords"in i&&(o.prototype.updateTextCoords=function(t){return i.updateTextCoords.call(this,u,t)}),"fillCmp"in i&&(o.prototype.fillCmp=function(t){return i.fillCmp.call(this,u,t)}),"remove"in i&&(o.prototype.remove=function(){i.remove.call(this,u),e&&e.prototype.remove.call(this)}),"setSolid"in i&&(o.prototype.setSolid=function(t){i.setSolid.call(this,u,t)}),"on"in i&&(o.prototype.on=function(t,o,e){i.on.call(this,t,o,e)}),"off"in i&&(o.prototype.off=function(t,o){i.off.call(this,t,o)}),"stringify"in i&&(o.prototype.stringify=function(){return[o.strId,i.stringify.call(this,u)].join(",")}),"restore"in i?o.restore=function(t){return i.restore.call(this,u,t)}:e&&(o.restore=e.restore),"helperMethods"in i&&Object.keys(i.helperMethods).forEach(function(t){o[t]=function(){return i.helperMethods[t].apply(this,[u].concat(Array.prototype.slice.call(arguments)))}}),o.strId=t,u.graphObjectTypes[o.strId]=o},t.customGraphObjects),g.prototype.activate=function(){u.activeTool.deactivate(),(u.activeTool=this).button.blur(),this.button.prop("disabled",!0),u.selectedObj&&u.selectedObj.blur(),u.selectedObj=null},g.prototype.finish=function(){u.updateObjects(),u.updateText(),u.board.update(),u.selectTool.activate()},g.prototype.updateHighlights=function(t){return!1},g.prototype.removeHighlights=function(){Object.keys(this.hlObjs).forEach(function(t){u.board.removeObject(this[t]),delete this[t]},this.hlObjs)},g.prototype.deactivate=function(){this.button.prop("disabled",!1),this.removeHighlights()},y.prototype=Object.create(g.prototype),Object.defineProperty(y.prototype,"constructor",{value:y,enumerable:!1,writable:!0}),y.prototype.selectionChanged=function(t){if(u.selectedObj){if(u.selectedObj.id()==this.gtGraphObject.id())return;for(var o=u.getMouseCoords(t),e=Object.values(u.selectedObj.definingPts),i=0;i<e.length;++i)if(e[i].X()==u.snapRound(o.usrCoords[1],u.snapSizeX)&&e[i].Y()==u.snapRound(o.usrCoords[2],u.snapSizeY))return;u.selectedObj.blur()}u.selectedObj=this.gtGraphObject,u.selectedObj.focus()},y.prototype.activate=function(t){var o=u.selectedObj;g.prototype.activate.call(this),o&&(u.selectedObj=o),t||1!=u.graphedObjs.length||(u.selectedObj=u.graphedObjs[0]),u.selectedObj&&u.selectedObj.focus(),u.graphedObjs.forEach(function(t){t.on("down",this.selectionChanged)},this)},y.prototype.deactivate=function(){u.graphedObjs.forEach(function(t){t.off("down",this.selectionChanged)},this),g.prototype.deactivate.call(this)},O.prototype=Object.create(g.prototype),Object.defineProperty(O.prototype,"constructor",{value:O,enumerable:!1,writable:!0}),O.prototype.updateHighlights=function(t){return void 0!==t&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]):this.hlObjs.hl_point=u.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:u.underConstructionColor,fixed:!0,snapToGrid:!0,snapSizeX:u.snapSizeX,snapSizeY:u.snapSizeY,withLabel:!1}),u.setTextCoords(t.usrCoords[1],t.usrCoords[2]),u.board.update(),!0)},O.prototype.deactivate=function(){u.board.off("up"),u.board.containerObj.style.cursor="auto",g.prototype.deactivate.call(this)},O.prototype.activate=function(){g.prototype.activate.call(this),u.board.containerObj.style.cursor="none";var o=this;u.board.on("up",function(t){t=u.getMouseCoords(t);u.board.hasPoint(t.usrCoords[1],t.usrCoords[2])&&(u.board.off("up"),u.selectedObj=new u.graphObjectTypes.point(t.usrCoords[1],t.usrCoords[2]),u.graphedObjs.push(u.selectedObj),o.finish())})},C.prototype=Object.create(g.prototype),Object.defineProperty(C.prototype,"constructor",{value:C,enumerable:!1,writable:!0}),C.prototype.updateHighlights=function(t){return"hl_line"in this.hlObjs&&this.hlObjs.hl_line.setAttribute({dash:u.drawSolid?0:2}),void 0!==t&&(!("point1"in this&&u.snapRound(t.usrCoords[1],u.snapSizeX)==this.point1.X()&&u.snapRound(t.usrCoords[2],u.snapSizeY)==this.point1.Y())&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]):(this.hlObjs.hl_point=u.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:u.underConstructionColor,fixed:!0,snapToGrid:!0,snapSizeX:u.snapSizeX,snapSizeY:u.snapSizeY,withLabel:!1}),"point1"in this&&(this.hlObjs.hl_line=u.board.create("line",[this.point1,this.hlObjs.hl_point],{fixed:!0,strokeColor:u.underConstructionColor,highlight:!1,dash:u.drawSolid?0:2}))),u.setTextCoords(this.hlObjs.hl_point.X(),this.hlObjs.hl_point.Y()),u.board.update(),!0))},C.prototype.deactivate=function(){u.board.off("up"),"point1"in this&&u.board.removeObject(this.point1),delete this.point1,u.board.containerObj.style.cursor="auto",g.prototype.deactivate.call(this)},C.prototype.activate=function(){g.prototype.activate.call(this),u.board.containerObj.style.cursor="none";var o=this;u.board.on("up",function(t){t=u.getMouseCoords(t);u.board.hasPoint(t.usrCoords[1],t.usrCoords[2])&&(u.board.off("up"),o.point1=u.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,snapToGrid:!0,snapSizeX:u.snapSizeX,snapSizeY:u.snapSizeY,withLabel:!1}),o.point1.setAttribute({fixed:!0}),o.removeHighlights(),u.board.on("up",function(t){t=u.getMouseCoords(t);o.point1.X()==u.snapRound(t.usrCoords[1],u.snapSizeX)&&o.point1.Y()==u.snapRound(t.usrCoords[2],u.snapSizeY)||!u.board.hasPoint(t.usrCoords[1],t.usrCoords[2])||(u.board.off("up"),o.point1.setAttribute({fixed:!1}),o.point1.on("down",function(){u.board.containerObj.style.cursor="none"}),o.point1.on("up",function(){u.board.containerObj.style.cursor="auto"}),u.selectedObj=new u.graphObjectTypes.line(o.point1,u.createPoint(t.usrCoords[1],t.usrCoords[2],o.point1),u.drawSolid),u.graphedObjs.push(u.selectedObj),delete o.point1,o.finish())}),u.board.update())})},j.prototype=Object.create(g.prototype),Object.defineProperty(j.prototype,"constructor",{value:j,enumerable:!1,writable:!0}),j.prototype.updateHighlights=function(t){return"hl_circle"in this.hlObjs&&this.hlObjs.hl_circle.setAttribute({dash:u.drawSolid?0:2}),void 0!==t&&(!("center"in this&&u.snapRound(t.usrCoords[1],u.snapSizeX)==this.center.X()&&u.snapRound(t.usrCoords[2],u.snapSizeY)==this.center.Y())&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]):(this.hlObjs.hl_point=u.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:u.underConstructionColor,fixed:!0,snapToGrid:!0,snapSizeX:u.snapSizeX,snapSizeY:u.snapSizeY,withLabel:!1}),"center"in this&&(this.hlObjs.hl_circle=u.board.create("circle",[this.center,this.hlObjs.hl_point],{fixed:!0,strokeColor:u.underConstructionColor,highlight:!1,dash:u.drawSolid?0:2}))),u.setTextCoords(this.hlObjs.hl_point.X(),this.hlObjs.hl_point.Y()),u.board.update(),!0))},j.prototype.deactivate=function(){u.board.off("up"),"center"in this&&u.board.removeObject(this.center),delete this.center,u.board.containerObj.style.cursor="auto",g.prototype.deactivate.call(this)},j.prototype.activate=function(){g.prototype.activate.call(this),u.board.containerObj.style.cursor="none";var o=this;u.board.on("up",function(t){t=u.getMouseCoords(t);u.board.hasPoint(t.usrCoords[1],t.usrCoords[2])&&(u.board.off("up"),o.center=u.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,snapToGrid:!0,snapSizeX:u.snapSizeX,snapSizeY:u.snapSizeY,withLabel:!1}),o.center.setAttribute({fixed:!0}),o.removeHighlights(),u.board.on("up",function(t){t=u.getMouseCoords(t);o.center.X()==u.snapRound(t.usrCoords[1],u.snapSizeX)&&o.center.Y()==u.snapRound(t.usrCoords[2],u.snapSizeY)||!u.board.hasPoint(t.usrCoords[1],t.usrCoords[2])||(u.board.off("up"),o.center.setAttribute({fixed:!1}),o.center.on("down",function(){u.board.containerObj.style.cursor="none"}),o.center.on("up",function(){u.board.containerObj.style.cursor="auto"}),u.selectedObj=new u.graphObjectTypes.circle(o.center,u.createPoint(t.usrCoords[1],t.usrCoords[2],o.center),u.drawSolid),u.graphedObjs.push(u.selectedObj),delete o.center,o.finish())}),u.board.update())})},v.prototype=Object.create(g.prototype),Object.defineProperty(v.prototype,"constructor",{value:v,enumerable:!1,writable:!0}),v.prototype.updateHighlights=function(t){return"hl_parabola"in this.hlObjs&&this.hlObjs.hl_parabola.setAttribute({dash:u.drawSolid?0:2}),void 0!==t&&((!("vertex"in this)||u.snapRound(t.usrCoords[1],u.snapSizeX)!=this.vertex.X()&&u.snapRound(t.usrCoords[2],u.snapSizeY)!=this.vertex.Y())&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]):(this.hlObjs.hl_point=u.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:u.underConstructionColor,fixed:!0,snapToGrid:!0,snapSizeX:u.snapSizeX,snapSizeY:u.snapSizeY,highlight:!1,withLabel:!1}),"vertex"in this&&(this.hlObjs.hl_parabola=h(this.vertex,this.hlObjs.hl_point,this.vertical,u.drawSolid,u.underConstructionColor))),u.setTextCoords(this.hlObjs.hl_point.X(),this.hlObjs.hl_point.Y()),u.board.update(),!0))},v.prototype.deactivate=function(){u.board.off("up"),"vertex"in this&&u.board.removeObject(this.vertex),delete this.vertex,u.board.containerObj.style.cursor="auto",g.prototype.deactivate.call(this)},v.prototype.activate=function(){g.prototype.activate.call(this),u.board.containerObj.style.cursor="none";var o=this;u.board.on("up",function(t){t=u.getMouseCoords(t);u.board.hasPoint(t.usrCoords[1],t.usrCoords[2])&&(u.board.off("up"),o.vertex=u.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,snapToGrid:!0,snapSizeX:u.snapSizeX,snapSizeY:u.snapSizeY,withLabel:!1}),o.vertex.setAttribute({fixed:!0}),o.removeHighlights(),u.board.on("up",function(t){t=u.getMouseCoords(t);o.vertex.X()!=u.snapRound(t.usrCoords[1],u.snapSizeX)&&o.vertex.Y()!=u.snapRound(t.usrCoords[2],u.snapSizeY)&&u.board.hasPoint(t.usrCoords[1],t.usrCoords[2])&&(u.board.off("up"),o.vertex.setAttribute({fixed:!1}),o.vertex.on("down",function(){u.board.containerObj.style.cursor="none"}),o.vertex.on("up",function(){u.board.containerObj.style.cursor="auto"}),u.selectedObj=new u.graphObjectTypes.parabola(o.vertex,u.createPoint(t.usrCoords[1],t.usrCoords[2],o.vertex,!0),o.vertical,u.drawSolid),u.graphedObjs.push(u.selectedObj),delete o.vertex,o.finish())}),u.board.update())})},m.prototype=Object.create(v.prototype),Object.defineProperty(m.prototype,"constructor",{value:m,enumerable:!1,writable:!0}),S.prototype=Object.create(v.prototype),Object.defineProperty(S.prototype,"constructor",{value:S,enumerable:!1,writable:!0}),x.prototype=Object.create(g.prototype),Object.defineProperty(x.prototype,"constructor",{value:x,enumerable:!1,writable:!0}),x.prototype.updateHighlights=function(t){return void 0!==t&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[u.snapRound(t.usrCoords[1],u.snapSizeX)-12/u.board.unitX,u.snapRound(t.usrCoords[2],u.snapSizeY)-12/u.board.unitY]):this.hlObjs.hl_point=u.board.create("image",[u.fillIcon,[u.snapRound(t.usrCoords[1],u.snapSizeX)-12/u.board.unitX,u.snapRound(t.usrCoords[2],u.snapSizeY)-12/u.board.unitY],[24/u.board.unitX,24/u.board.unitY]],{withLabel:!1,highlight:!1,layer:9}),u.setTextCoords(t.usrCoords[1],t.usrCoords[2]),u.board.update(),!0)},x.prototype.deactivate=function(){u.board.off("up"),u.board.containerObj.style.cursor="auto",g.prototype.deactivate.call(this)},x.prototype.activate=function(){g.prototype.activate.call(this),u.board.containerObj.style.cursor="none",u.board.on("up",function(t){u.board.off("up");t=u.getMouseCoords(t);u.board.hasPoint(t.usrCoords[1],t.usrCoords[2])&&(u.board.off("up"),u.selectedObj=new u.graphObjectTypes.fill(u.createPoint(t.usrCoords[1],t.usrCoords[2])),u.graphedObjs.push(u.selectedObj),u.updateText(),u.board.update(),u.selectTool.activate())})},u.toolTypes={PointTool:O,LineTool:C,CircleTool:j,VerticalParabolaTool:m,HorizontalParabolaTool:S,FillTool:x,SolidDashTool:function(t){var o=$("<div class='gt-solid-dash-box'></div>");u.solidButton=$("<button type=button class='btn gt-button gt-tool-button gt-solid-tool' data-toggle='tooltip' title='Make Selected Object Solid' disabled>&nbsp;</button>").on("click",{solid:!0},X),o.append(u.solidButton),u.dashedButton=$("<button type=button class='btn gt-button gt-tool-button gt-dashed-tool' data-toggle='tooltip' title='Make Selected Object Dashed'>&nbsp;</button>").on("click",{solid:!1},X),o.append(u.dashedButton),t.append(o)}},n=$("<div id='"+o+"_graph' class='jxgbox graphtool-graph'></div>"),e.append(n),u.isStatic||(s=$("<div class='gt-toolbar-container'></div>"),u.selectTool=new y(s),"customTools"in t&&Object.keys(t.customTools).forEach(function(t){var o,e=this[t],i="parent"in e?e.parent?u.toolTypes[e.parent]:null:g;i?((o=function(t){i.call(this,t,e.iconName,e.tooltip),"initialize"in e&&e.initialize.call(this,u,t)}).prototype=Object.create(i.prototype),Object.defineProperty(o.prototype,"constructor",{value:o,enumerable:!1,writable:!0})):o=function(){e.initialize.call(this,u,container)},"activate"in e&&(o.prototype.activate=function(){i.prototype.activate.call(this),e.activate.call(this,u)}),"deactivate"in e&&(o.prototype.deactivate=function(){e.deactivate.call(this,u),i.prototype.deactivate.call(this)}),"updateHighlights"in e&&(o.prototype.updateHighlights=function(t){return e.updateHighlights.call(this,u,t)}),"removeHighlights"in e&&(o.prototype.removeHighlights=function(){e.removeHighlights.call(this,u),i.prototype.removeHighlights.call(this)}),"helperMethods"in e&&Object.keys(e.helperMethods).forEach(function(t){o[t]=function(){return e.helperMethods[t].apply(this,[u].concat(Array.prototype.slice.call(arguments)))}}),u.toolTypes[t]=o},t.customTools),i.forEach(function(t){t in u.toolTypes?new u.toolTypes[t](s):console.log("Unknown tool: "+t)}),s.append($("<button type=button class='btn gt-button' data-toggle='tooltip' title='Delete Selected Object'>Delete</button>").on("click",function(){var o;this.blur(),u.selectedObj&&((o=$('<div class="modal" tabindex="-1" role="dialog" aria-labelledby="deleteObjectDialog" aria-hidden="true"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button><h3 id="deleteObjectDialog">Delete Selected Object</h3></div><div class="modal-body"><div>Do you want to delete the selected object?</div></div><div class="modal-footer"><button class="btn btn-primary" id="gt-confirm-delete">Yes</button><button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">No</button></div></div>')).modal("show"),$(".modal-backdrop").css("opacity","0.2"),o.on("hidden",function(){o.remove()}),$("#gt-confirm-delete").on("click",function(){for(var t=0;t<u.graphedObjs.length;++t)if(u.graphedObjs[t].id()===u.selectedObj.id()){u.graphedObjs[t].remove(),u.graphedObjs.splice(t,1);break}u.selectedObj=null,u.updateObjects(),u.updateText(),o.modal("hide")}))})),s.append($("<button type=button class='btn gt-button' data-toggle='tooltip' title='Clear All Objects From Graph'>Clear</button>").on("click",function(){var t;this.blur(),0!=u.graphedObjs.length&&((t=$('<div class="modal" tabindex="-1" role="dialog" aria-labelledby="clearGraphDialog" aria-hidden="true"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button><h3 id="clearGraphDialog">Delete Selected Object</h3></div><div class="modal-body"><div>Do you want to remove all graphed objects?</div></div><div class="modal-footer"><button class="btn btn-primary" id="gt-confirm-clear">Yes</button><button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">No</button></div></div>')).modal("show"),$(".modal-backdrop").css("opacity","0.2"),t.on("hidden",function(){t.remove()}),$("#gt-confirm-clear").on("click",function(){u.graphedObjs.forEach(function(t){t.remove()}),u.graphedObjs=[],u.selectedObj=null,u.selectTool.activate(),u.html_input.value="",t.modal("hide")}))})),e.append(s),$('.gt-button[data-toggle="tooltip"]').tooltip({trigger:"hover",placement:"bottom",delay:{show:1e3,hide:0}})),function(){u.board=JXG.JSXGraph.initBoard(o+"_graph",r),u.board.suspendUpdate();var t=u.board.getBoundingBox();u.board.defaultAxes.x.point1.setPosition(JXG.COORDS_BY_USER,[t[0],0]),u.board.defaultAxes.x.point2.setPosition(JXG.COORDS_BY_USER,[t[2],0]),u.board.defaultAxes.y.point1.setPosition(JXG.COORDS_BY_USER,[0,t[3]]),u.board.defaultAxes.y.point2.setPosition(JXG.COORDS_BY_USER,[0,t[1]]),u.board.create("text",[function(){return u.board.getBoundingBox()[2]-3/u.board.unitX},function(){return 1.5/u.board.unitY},function(){return"\\(x\\)"}],{anchorX:"right",anchorY:"bottom",highlight:!1,color:"black",fixed:!0,useMathJax:!0}),u.board.create("text",[function(){return 4.5/u.board.unitX},function(){return u.board.getBoundingBox()[1]+2.5/u.board.unitY},function(){return"\\(y\\)"}],{anchorX:"left",anchorY:"top",highlight:!1,color:"black",fixed:!0,useMathJax:!0}),u.current_pos_text=u.board.create("text",[function(){return u.board.getBoundingBox()[2]-5/u.board.unitX},function(){return u.board.getBoundingBox()[3]+5/u.board.unitY},""],{anchorX:"right",anchorY:"bottom",fixed:!0}),u.board.highlightInfobox=function(t,o,e){return u.board.highlightCustomInfobox("",e)},u.isStatic||(u.board.on("move",function(t){t=u.getMouseCoords(t);u.activeTool.updateHighlights(t)||u.selectedObj&&u.selectedObj.updateTextCoords(t)||u.setTextCoords(t.usrCoords[1],t.usrCoords[2])}),$(document).on("keydown.ToolDeactivate",function(t){"Escape"===t.key&&u.selectTool.activate()})),$(window).resize(function(t){u.board.canvasWidth==n.width()&&u.board.canvasHeight==n.height()||(u.board.resizeContainer(n.width(),n.height(),!0),u.graphedObjs.forEach(function(t){t.onResize()}),u.staticObjs.forEach(function(t){t.onResize()}))}),u.drawSolid=!0,u.graphedObjs=[],u.staticObjs=[],u.selectedObj=null,u.board.unsuspendUpdate()}(),"html_input"in u&&w(u.html_input.value,!1),"staticObjects"in t&&"string"==typeof t.staticObjects&&t.staticObjects.length&&w(t.staticObjects,!0),u.isStatic||(u.updateText(),u.activeTool=u.selectTool,u.activeTool.activate(!0))):setTimeout(function(){graphTool(o,t)},100))}Object.values||(Object.values=function(o){return Object.keys(o).map(function(t){return o[t]})});
